(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1a4d25c2"],{1169:function(e,t,a){var s=a("2d95");e.exports=Array.isArray||function(e){return"Array"==s(e)}},"13f1":function(e,t,a){},"1c0c":function(e,t,a){"use strict";var s=a("82fe");a.n(s).a},"258d":function(e,t,a){},"37c8":function(e,t,a){t.f=a("2b4c")},"3a72":function(e,t,a){var s=a("7726"),i=a("8378"),n=a("2d00"),r=a("37c8"),o=a("86cc").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=n?{}:s.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:r.f(e)})}},"3fcd":function(e,t,a){"use strict";var s=a("b5b9");a.n(s).a},"50d1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoElEQVQ4T2NkoBAwUqifAW7A6cVBMxj+/9cAG8jI8IeB6X+VafSGU4QsABuwf78DC+8Tod9s3KIMIIwP/Pr6muHn11c3TWPXgy2DG6DwW++3go4rIQvB8g+u7GZQ+PCchTFs9V+wAf//MzAynE37R5RuqCJGk1lgvfAw+H8m7f+oAUM/DE6nNTAw/HcgLioZDzCazmpASQfEacRURXFuBABFIkcRb59s8AAAAABJRU5ErkJggg=="},"5acc":function(e,t,a){"use strict";var s=a("258d");a.n(s).a},"67ab":function(e,t,a){var s=a("ca5a")("meta"),i=a("d3f4"),n=a("69a8"),r=a("86cc").f,o=0,c=Object.isExtensible||function(){return!0},l=!a("79e5")((function(){return c(Object.preventExtensions({}))})),d=function(e){r(e,s,{value:{i:"O"+ ++o,w:{}}})},p=e.exports={KEY:s,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,s)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[s].i},getWeak:function(e,t){if(!n(e,s)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[s].w},onFreeze:function(e){return l&&p.NEED&&c(e)&&!n(e,s)&&d(e),e}}},"7bbc":function(e,t,a){var s=a("6821"),i=a("9093").f,n={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return r&&"[object Window]"==n.call(e)?function(e){try{return i(e)}catch(e){return r.slice()}}(e):i(s(e))}},"82fe":function(e,t,a){},"8a81":function(e,t,a){"use strict";var s=a("7726"),i=a("69a8"),n=a("9e1e"),r=a("5ca1"),o=a("2aba"),c=a("67ab").KEY,l=a("79e5"),d=a("5537"),p=a("7f20"),u=a("ca5a"),h=a("2b4c"),m=a("37c8"),f=a("3a72"),v=a("d4c0"),g=a("1169"),b=a("cb7c"),y=a("d3f4"),T=a("4bf8"),_=a("6821"),k=a("6a99"),C=a("4630"),w=a("2aeb"),x=a("7bbc"),$=a("11e9"),S=a("2621"),N=a("86cc"),D=a("0d58"),I=$.f,M=N.f,O=x.f,j=s.Symbol,R=s.JSON,L=R&&R.stringify,q="prototype",A=h("_hidden"),F=h("toPrimitive"),E={}.propertyIsEnumerable,P=d("symbol-registry"),U=d("symbols"),z=d("op-symbols"),Y=Object[q],B="function"==typeof j&&!!S.f,H=s.QObject,W=!H||!H[q]||!H[q].findChild,G=n&&l((function(){return 7!=w(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,a){var s=I(Y,t);s&&delete Y[t],M(e,t,a),s&&e!==Y&&M(Y,t,s)}:M,Q=function(e){var t=U[e]=w(j[q]);return t._k=e,t},V=B&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,t,a){return e===Y&&J(z,t,a),b(e),t=k(t,!0),b(a),i(U,t)?(a.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),a=w(a,{enumerable:C(0,!1)})):(i(e,A)||M(e,A,C(1,{})),e[A][t]=!0),G(e,t,a)):M(e,t,a)},K=function(e,t){b(e);for(var a,s=v(t=_(t)),i=0,n=s.length;n>i;)J(e,a=s[i++],t[a]);return e},X=function(e){var t=E.call(this,e=k(e,!0));return!(this===Y&&i(U,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,A)&&this[A][e])||t)},Z=function(e,t){if(e=_(e),t=k(t,!0),e!==Y||!i(U,t)||i(z,t)){var a=I(e,t);return!a||!i(U,t)||i(e,A)&&e[A][t]||(a.enumerable=!0),a}},ee=function(e){for(var t,a=O(_(e)),s=[],n=0;a.length>n;)i(U,t=a[n++])||t==A||t==c||s.push(t);return s},te=function(e){for(var t,a=e===Y,s=O(a?z:_(e)),n=[],r=0;s.length>r;)!i(U,t=s[r++])||a&&!i(Y,t)||n.push(U[t]);return n};B||(o((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:void 0),t=function(a){this===Y&&t.call(z,a),i(this,A)&&i(this[A],e)&&(this[A][e]=!1),G(this,e,C(1,a))};return n&&W&&G(Y,e,{configurable:!0,set:t}),Q(e)})[q],"toString",(function(){return this._k})),$.f=Z,N.f=J,a("9093").f=x.f=ee,a("52a7").f=X,S.f=te,n&&!a("2d00")&&o(Y,"propertyIsEnumerable",X,!0),m.f=function(e){return Q(h(e))}),r(r.G+r.W+r.F*!B,{Symbol:j});for(var ae="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),se=0;ae.length>se;)h(ae[se++]);for(var ie=D(h.store),ne=0;ie.length>ne;)f(ie[ne++]);r(r.S+r.F*!B,"Symbol",{for:function(e){return i(P,e+="")?P[e]:P[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in P)if(P[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),r(r.S+r.F*!B,"Object",{create:function(e,t){return void 0===t?w(e):K(w(e),t)},defineProperty:J,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var re=l((function(){S.f(1)}));r(r.S+r.F*re,"Object",{getOwnPropertySymbols:function(e){return S.f(T(e))}}),R&&r(r.S+r.F*(!B||l((function(){var e=j();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,a,s=[e],i=1;arguments.length>i;)s.push(arguments[i++]);if(a=t=s[1],(y(t)||void 0!==e)&&!V(e))return g(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!V(t))return t}),s[1]=t,L.apply(R,s)}}),j[q][F]||a("32e9")(j[q],F,j[q].valueOf),p(j,"Symbol"),p(Math,"Math",!0),p(s.JSON,"JSON",!0)},"971c":function(e,t,a){"use strict";var s=a("13f1");a.n(s).a},"9c48":function(e,t,a){},a3d6:function(e,t,a){},ac4d:function(e,t,a){a("3a72")("asyncIterator")},b5b9:function(e,t,a){},c48c:function(e,t,a){"use strict";var s=a("9c48");a.n(s).a},c665:function(e,t,a){"use strict";var s=a("da03");a.n(s).a},d036:function(e,t,a){"use strict";var s=a("d8a8");a.n(s).a},d4c0:function(e,t,a){var s=a("0d58"),i=a("2621"),n=a("52a7");e.exports=function(e){var t=s(e),a=i.f;if(a)for(var r,o=a(e),c=n.f,l=0;o.length>l;)c.call(e,r=o[l++])&&t.push(r);return t}},d8a8:function(e,t,a){},da03:function(e,t,a){},fa9b:function(e,t,a){"use strict";a.r(t);var s=a("b893"),i=a("4ec3"),n=(a("ac6a"),a("5df3"),a("1c4c"),a("a481"),a("96cf"),a("3b8d")),r=(a("7f7f"),{name:"ModelMng",data:function(){var e=this;return{total:0,pageSize:10,pageNum:1,tbLoading:!0,createModel:!1,deleteTips:!1,confirmTips:!1,selectedModelName:this.$t("depTai.modelUnChoice"),selected:!1,selectedIndex:-1,selectedItem:-1,modelSourceType:0,seletFileName:"",deletModelId:-1,uploadingPer:0,workspace:this.$store.state.userInfo.workspace,userSpaceTotal:30*Math.pow(1024,3),prefix:"",projectName:"",name:"",version:"",description:"",modelHash:"",fileSize:-1,uploading:!1,descriptionLength:0,showDetailModal:!1,detal:{depId:"",verName:"",verNum:"",verDescribe:"",modelSource:"",trainFirstName:"",trainSecondName:""},modelColumns:[{title:this.$t("depTai.versionName"),key:"ver-name",width:200,ellipsis:!0,render:function(e,t){return e("div",{class:"v-name-tb"},[e("span",{class:"v-name-text",attrs:{title:t.row.name}},t.row.name||"-")])}},{title:this.$t("depTai.versionNumber"),key:"ver-number",width:120,tooltip:!0,render:function(e,t){return e("span",{class:"v-num-tb",attrs:{title:t.row.version}},t.row.version)}},{title:this.$t("depTai.releaseTime"),key:"release-time",width:160,tooltip:!0,render:function(e,t){return e("span",{class:"release-time-tb",attrs:{title:Object(s.l)("Y-M-D h:m",t.row.createTime)}},Object(s.l)("Y-M-D h:m",t.row.createTime))}},{title:this.$t("depTai.dource"),key:"dployment-status",width:140,tooltip:!0,render:function(t,a){return t("span",{class:"deploy-text-over",attrs:{title:0===a.row.source?"InFlex":e.$t("depTai.localUpload")}},0===a.row.source?"InFlex":e.$t("depTai.localUpload"))}},{title:this.$t("depTai.size"),key:"request-status",width:120,tooltip:!0,render:function(e,t){return e("span",{class:"deploy-text-over"},Object(s.p)(t.row.size))}},{title:this.$t("depTai.modelDescribe"),key:"description",width:200,tooltip:!0,render:function(t,a){return t("input",{class:"description-inp",attrs:{type:"text",value:a.row.description},on:{change:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=event.target.value,a.row.description=s,t.next=4,e.$axios.post(i.a.updateModel,{id:a.row.id,description:s});case 4:200===(n=t.sent).data.code?e.$Message.success(e.$t("depTai.changeSuccess")):e.$Message.error(n.data.message);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}})}},{title:this.$t("depTai.operation"),key:"operation",width:Object(s.A)()?250:180,align:"center",fixed:"right",tooltip:!0,render:function(t,a){var s=a.row;return t("div",{class:["operation-tb deployment-ing"]},[t("span",{class:"handle-tb",on:{click:function(){e.$store.commit("set_create_deploy",!0),e.$parent.changeView("DeployOnline")}}},e.$t("depTai.deploy")),t("span",{class:"details-tb",on:{click:function(){e.handleEditDetail(s)}}},e.$t("depTai.projectDetail")),t("span",{class:"details-tb",on:{click:function(){location.href=i.a.ipfsUrl.replace("/ipfs/","/zip/")+a.row.modelHash}}},e.$t("depTai.download")),t("span",{class:"delete-tb",on:{click:function(){e.deleteModel(a.row.id)}}},e.$t("depTai.delete"))])}}],tbData:[],trainList:[],files:""}},created:function(){this.getModelList(),this.getTrainList()},filters:{filterFT:function(e){return Object(s.l)("Y-M-D h:m",e)},filterConvertToKW:function(e){return convertToKW(e)}},methods:{choiceModel:function(e,t,a,i,n,r,o){this.selectedModelName=e+" > "+t+"（"+Object(s.l)("Y-M-D h:m",a)+"）",this.selected=!0,this.selectedIndex=i,this.selectedItem=n,this.modelHash=r,this.prefix=Object(s.m)(10),this.projectName=o,this.trainFirstName=e,this.trainSecondName=t},getFileName:function(){var e=event.target.files,t=e[0].name;if(".zip"!==(t?t.substr(t.lastIndexOf("."),t.length-1):""))return event.target.value="",void this.$Message.error(this.$t("depTai.formatTips2"));this.seletFileName=t,this.files=e},createWay:function(){if(this.uploading)this.$Message.warning(this.$t("depTai.uploadingTips"));else if(0===this.modelSourceType)this.createModelInfo();else{if(""===this.files)return void this.$Message.warning(this.$t("depTai.fileUnChoice"));this.upFileXs(this.files,-1)}},upFileXs:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,a){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.length){e.next=3;break}return e.abrupt("return");case 3:return this.curUptype=a,this.projectName=t[0].name,this.prefix=Object(s.m)(10),i=Array.from(t,(function(e){return e.size})).reduce((function(e,t){return e+t}),0),this.fileSize=i,n="/".concat(this.workspace),"".concat(n,"/").concat(this.prefix,"-").concat(this.projectName),e.next=12,this.getUsedSpace(n);case 12:if(!(e.sent+i>this.userSpaceTotal)){e.next=15;break}return e.abrupt("return",this.$Message.error(this.$t("Console.spaceUnEnoughTip")));case 15:if(this.workspace){e.next=18;break}return this.$Message.error(this.$t("Console.workspaceNotFound")),e.abrupt("return");case 18:this.upModel(t[0],i),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(t,a){return e.apply(this,arguments)}}(),upModel:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,a){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uploading=!0,this.ipfsTemp=this.$tesraIpfs.addZip(t,(function(e,t){i.uploadingPer=Object(s.k)(100*Object(s.f)(e,t))})),this.ipfsTemp.then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t||{}).Hash&&(i.modelHash=t.Hash,i.uploadingPer=100,i.uploading=!1,i.createModelInfo());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.$Message.error(i.$t("depTai.uploadErrTips")),i.uploading=!1,i.dataInit()}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),copyFileToWorkSpace:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this.getUsedSpace("/".concat(this.workspace));case 6:if(!(e.sent+a>this.userSpaceTotal)){e.next=9;break}return e.abrupt("return",this.$Message.error(this.$t("Console.spaceUnEnoughTip")));case 9:return e.next=11,this.$ipfs.files.cp("/ipfs/".concat(t),"/".concat(this.workspace,"/ws-deploy-model/").concat(this.prefix,"-").concat(this.projectName));case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t,a){return e.apply(this,arguments)}}(),getUsedSpace:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$ipfs.files.stat(t);case 3:return a=e.sent,e.abrupt("return",a.cumulativeSize);case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),changePage:function(e){this.pageNum=e,this.getModelList()},getModelList:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.tbLoading=!0,e.next=4,this.$axios.post(i.a.findDeployModelList,{pageNum:this.pageNum,pageSize:this.pageSize});case 4:200===(t=e.sent).data.code?(t.data.payload.list.length>0?(this.tbData=t.data.payload.list,this.total=t.data.payload.total):this.tbData=[],this.tbLoading=!1,this.tableInit()):this.$Message.error(t.data.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getTrainList:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.findAllTrainTaskModel);case 3:200===(t=e.sent).data.code?t.data.payload.length>0&&(this.trainList=t.data.payload):this.$Message.error(t.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),deleteModel:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.removeModel,{id:t});case 3:200===(a=e.sent).data.code?(this.$Message.success(this.$t("depTai.recycleTips")),this.getModelList()):this.$Message.error(a.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),createModelInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.uploading){e.next=3;break}return this.$Message.warning(this.$t("depTai.uploadingTips")),e.abrupt("return");case 3:if(this.dataChecked(this.spaceSplice(this.name))&&this.dataChecked(this.spaceSplice(this.version))){e.next=6;break}return this.$Message.warning(this.$t("depTai.infoErrTips")),e.abrupt("return");case 6:if(this.dataChecked(this.modelHash)&&this.dataChecked(this.projectName)||0!==this.modelSourceType){e.next=9;break}return this.$Message.warning(this.$t("depTai.fileUnChoice")),e.abrupt("return");case 9:return t={name:this.spaceSplice(this.name),version:this.spaceSplice(this.version),description:this.spaceSplice(this.description),source:this.modelSourceType,modelHash:this.modelHash,dataName:this.projectName,filePrefix:this.prefix,size:this.fileSize,trainFirstName:this.trainFirstName,trainSecondName:this.trainSecondName},e.prev=11,e.next=14,this.$axios.post(i.a.addDeployModel,t);case 14:200===(a=e.sent).data.code?(this.getModelList(),this.$Message.success(this.$t("depTai.creatSuccess")),this.createModel=!1,this.name="",this.version="",this.description="",this.dataInit()):this.$Message.error(a.data.message),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11);case 21:case"end":return e.stop()}}),e,this,[[11,18]])})));return function(){return e.apply(this,arguments)}}(),downloadFile:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1!==t.indexOf("/")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch(t).then((function(e){return e.blob().then((function(e){var t=document.createElement("a"),s=window.URL.createObjectURL(e),i=a;t.href=s,t.download=i,t.click(),window.URL.revokeObjectURL(s)}))}));case 5:setTimeout(this.downMsg,1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),tableInit:function(){document.querySelectorAll(".ivu-table-body .ivu-table-tbody .ivu-table-row").forEach((function(e,t){e.setAttribute("index",t)})),document.querySelectorAll(".ivu-table-fixed-body .ivu-table-tbody .ivu-table-row").forEach((function(e,t){e.setAttribute("index",t)}))},checkScourceType:function(e){this.uploading?this.$Message.warning(this.$t("depTai.uploadingTips")):(this.modelSourceType=e,this.dataInit())},dataChecked:function(e){return""!==e&&null!=e},spaceSplice:function(e){return e.replace(/\s+/g,"")},dataInit:function(){this.choiceFile="",this.projectName="",this.prefix="",this.seletFileName="",this.$refs.choiceFile&&(this.$refs.choiceFile.value=""),this.uploadingPer=0,this.selectedModelName=this.$t("depTai.modelUnChoice"),this.selected=!1,this.files=""},handleEditDetail:function(e){this.detal={depId:e.id,verName:e.name,verNum:e.version,verDescribe:e.description,modelSource:0===e.source?"InFlex":this.$t("depTai.localUpload"),trainFirstName:e.trainFirstName,trainSecondName:e.trainSecondName,source:e.source,dataName:e.dataName},this.showDetailModal=!0},handleSaveDep:function(){this.reqUpdateDepDetail()},hideVersionDetailModal:function(){this.showDetailModal=!1},reqUpdateDepDetail:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.updateModel,a=this.detal,n={id:a.depId,name:a.verName,version:a.verNum,description:a.verDescribe},e.next=6,this.$axios.post(t,n);case 6:if(200!==e.sent.data.code){e.next=13;break}return this.hideVersionDetailModal(),this.$Message.success(this.$t("depTai.saved")),e.next=12,Object(s.A)(300);case 12:this.getModelList();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},computed:{isEng:function(){return Object(s.r)()},sourceDetail:function(){return 0===this.detal.source?"".concat(this.detal.trainFirstName," > ").concat(this.detal.trainSecondName):this.detal.dataName}}}),o=(a("c48c"),a("5acc"),a("d036"),a("2877")),c=Object(o.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"model-container"},[s("div",{staticClass:"head"},[s("div",{staticClass:"head-total",attrs:{cnrk:"我创建的"}},[e._v(e._s(e.$t("depTai.myModel"))+" "),s("span",[e._v(e._s(e.total))])]),s("span",{staticClass:"bg-linear",staticStyle:{padding:"0 15px"},attrs:{cnrk:"版本创建"},on:{click:function(t){e.confirmTips=!0}}},[e._v(e._s(e.$t("depTai.versionCreate")))])]),s("Modal",{staticClass:"confirmTips",attrs:{title:e.$t("depTai.modalTipsTitle")},model:{value:e.confirmTips,callback:function(t){e.confirmTips=t},expression:"confirmTips"}},[s("p",[e._v(e._s(e.$t("depTai.modalTipsContent")))]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("span",{staticClass:"bg-linear",staticStyle:{padding:"0 20px","font-size":"12px"},attrs:{cnrk:"确定"},on:{click:function(t){e.createModel=!0,e.confirmTips=!1}}},[e._v(e._s(e.$t("depTai.sure")))])])]),s("div",{staticClass:"model-list-main model-mng"},[s("Table",{staticClass:"beautify-tb-no-data",class:{"g-loading":e.tbLoading},attrs:{columns:e.modelColumns,data:e.tbData}}),e.total>0?s("Page",{attrs:{total:e.total,"page-size":e.pageSize},on:{"on-change":e.changePage}}):e._e()],1),s("Modal",{staticClass:"v-create",attrs:{cnrk:"版本创建",title:e.$t("depTai.versionCreate"),width:"580"},model:{value:e.createModel,callback:function(t){e.createModel=t},expression:"createModel"}},[s("div",{staticClass:"create-main"},[s("div",{staticClass:"item"},[s("div",{staticClass:"small"},[s("label",{class:["item-title required min justify",e.isEng?"enmin":""],attrs:{cnrk:"版本名称"}},[s("span",{staticClass:"identifier"},[e._v("*")]),e._v(e._s(e.$t("depTai.versionName")))]),s("i-input",{staticClass:"small-input",staticStyle:{width:"160px"},attrs:{type:"text",cnrk:"请输入版本名称",placeholder:e.$t("depTai.plsInputName"),title:e.$t("depTai.plsInputName")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("div",{staticClass:"small"},[s("label",{class:["item-title required min justify",e.isEng?"enmin":""],attrs:{cnrk:"版本号"}},[s("span",{staticClass:"identifier"},[e._v("*")]),e._v(e._s(e.$t("depTai.versionNumber")))]),s("i-input",{staticClass:"small-input",staticStyle:{width:"160px"},attrs:{type:"text",cnrk:"请输入版本号",placeholder:e.$t("depTai.plsInputVersion"),title:e.$t("depTai.plsInputVersion")},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"large"},[s("label",{class:["item-title min justify",e.isEng?"enmin":""],attrs:{cnrk:"描述"}},[e._v(e._s(e.$t("depTai.modelDescribe")))]),s("i-input",{staticClass:"describe",attrs:{type:"textarea",cnrk:"请输入项目描述",placeholder:e.$t("depTai.plInputDescribe"),maxlength:250},on:{input:function(t){e.descriptionLength=e.description.length}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),s("div",{staticClass:"description-length"},[e._v(e._s(e.descriptionLength)+" / 250")])],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"default"},[s("label",{staticClass:"item-title required",attrs:{cnrk:"模型来源"}},[s("span",{staticClass:"identifier"},[e._v("*")]),e._v(e._s(e.$t("depTai.modelSource")))]),s("div",{staticClass:"source-choice"},[s("div",{class:["source-item",0===e.modelSourceType?"checked":""],on:{click:function(t){return e.checkScourceType(0)}}},[e._v("InFlex\n            ")]),s("div",{class:["source-item",1===e.modelSourceType?"checked":""],attrs:{cnrk:"本地上传"},on:{click:function(t){return e.checkScourceType(1)}}},[e._v(e._s(e.$t("depTai.localUpload"))+"\n            ")])])])]),0===e.modelSourceType?s("div",{staticClass:"item"},[s("div",{staticClass:"default"},[s("div",{staticClass:"item-title required"},[s("span",{staticClass:"identifier fl-lf"},[e._v("*")]),s("span",{attrs:{cnrk:"在训练作业中选择"}},[e._v(e._s(e.$t("depTai.choiceInTask"))+"：")]),s("span",{staticClass:"model-name",style:e.selected?"color:#007AFF":"",attrs:{title:e.selectedModelName}},[e._v(e._s(e.selectedModelName))])]),s("div",{staticClass:"train-list"},[s("Collapse",{attrs:{"active-key":"0"}},e._l(e.trainList,(function(t,i){return s("Panel",{key:i},[e._v("\n                "+e._s(t.taskName)+"\n                "),e._l(t.list,(function(n,r){return s("div",{key:r,class:["train-list-item",i===e.selectedIndex&&r===e.selectedItem?"checked":void 0],attrs:{slot:"content"},slot:"content"},[s("p",{staticClass:"folder-name"},[s("img",{attrs:{src:a("50d1")}}),s("span",{staticClass:"train-name",attrs:{title:n.trainCode}},[e._v(e._s(n.trainCode))])]),s("span",{staticClass:"train-time"},[e._v(e._s(e._f("filterFT")(n.createTime)))]),s("span",{staticClass:"train-folder-choice",attrs:{cnrk:"选择"},on:{click:function(a){return e.choiceModel(t.taskName,n.trainCode,n.createTime,i,r,n.outputHash,n.trainCode)}}},[e._v(e._s(e.$t("depTai.choice")))])])}))],2)})),1)],1)])]):e._e(),1===e.modelSourceType?s("div",{staticClass:"item"},[s("div",{staticClass:"default"},[s("div",{staticClass:"item-title required tit-flex"},[s("span",{staticClass:"identifier fl-lf"},[e._v("*")]),s("span",{staticStyle:{flex:"2"},attrs:{cnrk:"在本地模型中选择"}},[e._v(e._s(e.$t("depTai.choiceInLocalModel")))]),s("i-input",{staticClass:"select-input",staticStyle:{flex:"5"},attrs:{type:"text"},model:{value:e.seletFileName,callback:function(t){e.seletFileName=t},expression:"seletFileName"}}),s("input",{ref:"choiceFile",attrs:{type:"file",id:"choiceFile",accept:"application/zip,application/x-zip,application/x-zip-compressed",name:"choiceFile",hidden:""},on:{change:function(t){return e.getFileName()}}}),s("label",{staticClass:"choice-btn bg-linear",attrs:{for:"choiceFile",cnrk:"选择"}},[e._v(e._s(e.$t("depTai.choiceFile")))])],1),s("p",{staticClass:"upload-tips",attrs:{cnrk:"提示：仅支持.zip格式的压缩文件选取"}},[e._v(e._s(e.$t("depTai.formatTips")))]),s("div",{staticClass:"upload-bar"},[s("span",{staticClass:"total",attrs:{cnrk:"上传总进度"}},[e._v(e._s(e.$t("depTai.schedule")))]),s("div",{staticClass:"bar-body"},[s("div",{staticClass:"progress-bar",style:"width:"+(e.uploadingPer?e.uploadingPer+"%":"0%")})]),s("span",{staticClass:"schedule"},[e._v(e._s(e.uploadingPer?e.uploadingPer+"%":"0%"))])])])]):e._e()]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"creat-btns"},[s("CoButton",{attrs:{cnrk:"创建"},nativeOn:{click:function(t){return e.createWay()}}},[e._v(e._s(e.$t("depTai.modelCreate")))]),s("CoButtonWhite",{attrs:{cnrk:"取消"},nativeOn:{click:function(t){e.createModel=!1}}},[e._v(e._s(e.$t("depTai.createCancel")))])],1)])]),s("Modal",{staticClass:"delete-model-mng",attrs:{title:e.$t("depTai.deleteTitle"),width:"468"},model:{value:e.deleteTips,callback:function(t){e.deleteTips=t},expression:"deleteTips"}},[s("p",{staticClass:"delete-tips-txt"},[e._v(e._s(e.$t("depTai.deleteTipDesc")))]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"delete-btns"},[s("CoButton",{nativeOn:{click:function(t){return e.deleteModel()}}},[e._v(e._s(e.$t("depTai.sure")))]),s("CoButtonWhite",{attrs:{cnrk:"取消"},nativeOn:{click:function(t){e.deleteTips=!1}}},[e._v(e._s(e.$t("depTai.createCancel")))])],1)])]),s("Modal",{staticClass:"version-detail-modal",attrs:{width:"500",cnrk:"版本详情",title:e.$t("depTai.versionDetail")},model:{value:e.showDetailModal,callback:function(t){e.showDetailModal=t},expression:"showDetailModal"}},[s("div",{staticClass:"dep-version-detail"},[s("ul",{staticClass:"ul-banbf"},[s("li",[s("p",{staticClass:"p4m ver_name",attrs:{cnrk:"版本名称"}},[e._v(e._s(e.$t("depTai.verName")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.detal.verName,expression:"detal.verName"}],staticClass:"i4m inp_vername",attrs:{type:"text","max-length":"30"},domProps:{value:e.detal.verName},on:{input:function(t){t.target.composing||e.$set(e.detal,"verName",t.target.value)}}})]),s("li",[s("p",{staticClass:"p4m",attrs:{cnrk:"版本号"}},[e._v(e._s(e.$t("depTai.verNumn")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.detal.verNum,expression:"detal.verNum"}],staticClass:"i4m",attrs:{type:"text","max-length":"30"},domProps:{value:e.detal.verNum},on:{input:function(t){t.target.composing||e.$set(e.detal,"verNum",t.target.value)}}})])]),s("p",{staticClass:"p4m",attrs:{cnrk:"描述"}},[e._v(e._s(e.$t("depTai.modelDescribe")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.detal.verDescribe,expression:"detal.verDescribe"}],staticClass:"area-desc",attrs:{maxlength:"100"},domProps:{value:e.detal.verDescribe},on:{input:function(t){t.target.composing||e.$set(e.detal,"verDescribe",t.target.value)}}}),s("p",{staticClass:"p4m",attrs:{cnrk:"模型来源"}},[e._v(e._s(e.$t("depTai.modelSource")))]),s("p",{staticClass:"pso",attrs:{title:e.sourceDetail}},[e._v("["+e._s(e.detal.modelSource)+"] : "+e._s(e.$t("depTai.trainJob"))+": "+e._s(e.sourceDetail))])]),s("div",{staticClass:"version-detail-modal-footer",attrs:{slot:"footer"},slot:"footer"},[s("CoButton",{staticClass:"v-btn",attrs:{cnrk:"保存"},nativeOn:{click:function(t){return e.handleSaveDep()}}},[e._v(e._s(e.$t("depTai.saveX")))]),s("CoButtonWhite",{staticClass:"v-btn",attrs:{cnrk:"取消"},nativeOn:{click:function(t){return e.hideVersionDetailModal()}}},[e._v(e._s(e.$t("depTai.createCancel")))])],1)])],1)}),[],!1,null,"4775e012",null).exports,l=(a("ac4d"),a("8a81"),a("94e4")),d=a.n(l),p={example1:function(){return'\n# !/usr/bin/python3\n# -*-coding:utf-8-*-\n# version:1.0\nfrom PIL import Image\nimport numpy as np\n\n\n"""------------------必要部分--------------------"""\n# 输入张量 “字典”，命名必须为INPUTS\n# 张量名称必须正确\n# 图片输入张量为空\n# 其他输入的值必须不为空\n# 没有其他输入务必不要填写\nINPUTS = {\n    "input_tensor:0": None   # 输入图片张量，值为None\n    # "other:0": 1  其他输入，值不为空，没有请务必不要填写\n}\n\n# 输出张量 “名称”，命名必须为OUTPUT\n# 张量名称必须正确\nOUTPUT = "output_tensor:0"\n\n\ndef data_processing(img_path):\n    """\n    图片处理示例函数，根据自己模型的输入，将图片处理为所需要的维度\n    注意事项：1. 函数名称必须为data_processing\n              2. 函数参数只能有一个，用于接收图片的路径\n              3. 必须是处理单张图片的函数\n              4. 必须处理为图输入张量的维度\n              5. 必须将处理好的数据返回\n    param: img_path: 图片所在的路径\n    return: img: 处理好了的图像数据\n    """\n    img = Image.open(img_path)\n    # 将图像转换为数组\n    img = np.array(img)\n    # 通过转置， 更改维度，转换图片为输入所需要的维度\n    img = img.transpose(2, 0, 1)\n    img = np.reshape(img, [3072])\n    # 归一化\n    img = img / 255\n    img = np.expand_dims(img, axis=0)\n    # 返回处理好了的输入数组，维度一定要和输入张量的维度相同\n    return img\n    \n\n"""------------------可选部分--------------------"""\n# 图片分类类别 “字典”，即每个标签对应的字典\n# 命名必须为CLASS_DICT\n# 提供字典，根据字典，返回分类的类\n# 不提供字典，则直接返回各类的概率列表\n# 分类字典有误，也将直接返回各类的概率列表\nCLASS_DICT = {\n    "0": "airplane",\n    "1": "automobile",\n    "2": "bird",\n    "3": "cat",\n    "4": "deer",\n    "5": "dog",\n    "6": "frog",\n    "7": "horse",\n    "8": "ship",\n    "9": "truck"\n}\n\n    '}},u={name:"DeployOnline",data:function(){var e=this;return this.$createElement,{isEn:Object(s.r)(),total:0,pageSize:10,pageNum:1,tbLoading:!0,createDeploy:!1,deleteTips:!1,confirmTips:!1,selectedModelName:this.$t("depTai.plsChoiceModel"),deleteDeployId:-1,codeText:"",name:"",version:"",description:"",modelId:"",descriptionLength:0,deployingTimer:null,modelColumns:[{title:this.$t("depTai.versionName"),key:"ver-name",width:200,ellipsis:!0,render:function(e,t){return e("div",{class:"v-name-tb"},[e("span",{class:"v-name-text",attrs:{title:t.row.name}},t.row.name||"-")])}},{title:this.$t("depTai.versionNumber"),key:"ver-number",width:120,tooltip:!0,render:function(e,t){return e("span",{class:"v-num-tb",attrs:{title:t.row.version}},t.row.version)}},{title:this.$t("depTai.releaseTime"),key:"release-time",width:160,tooltip:!0,render:function(e,t){return e("span",{class:"release-time-tb",attrs:{title:Object(s.l)("Y-M-D h:m",t.row.createTime)}},Object(s.l)("Y-M-D h:m",t.row.createTime))}},{title:this.$t("depTai.deployStatus"),key:"dployment-status",width:140,tooltip:!0,render:function(t,a){var s="status-icon ivu-icon "+(1===a.row.status?"ivu-icon-ios-checkmark":0===a.row.status?"ivu-icon-ios-clock":3===a.row.status?"information-circled":"ivu-icon-ios-close"),i=1===a.row.status?e.$t("depTai.deploySuccess"):0===a.row.status?e.$t("depTai.deploying"):3===a.row.status?e.$t("depTai.closed"):e.$t("depTai.defeated");return 2===a.row.status?t("div",{class:"status-div-tb"},[t("Poptip",{attrs:{trigger:"hover","word-wrap":!0}},[t("textarea",{slot:"content",class:"log-list-tips-area"},[a.row.log]),t("i",{class:s},[3===a.row.status?"!":""]),t("span",{class:"status-txt"},[i])])]):t("div",{class:"status-div-tb"},[t("i",{class:s},[3===a.row.status?"!":""]),t("span",{class:"status-txt"},[i])])}},{title:this.$t("depTai.reqSorF"),key:"request-status",width:120,tooltip:!0,render:function(e,t){return e("span",{class:"request-status-tb"},t.row.successNumber+"/"+t.row.failNumber)}},{title:this.$t("depTai.modelDescribe"),key:"description",width:200,tooltip:!0,render:function(t,a){return t("input",{class:"description-inp",attrs:{type:"text",value:a.row.description},on:{change:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=event.target.value,t.next=4,e.$axios.post(i.a.deployUpdate,{id:a.row.id,description:s});case 4:200===(n=t.sent).data.code?e.$Message.success(e.$t("depTai.changeSuccess")):e.$Message.error(n.data.message),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()}})}},{title:this.$t("depTai.operation"),key:"operation",width:200,align:"center",fixed:"right",tooltip:!0,render:function(t,a){return t("div",{class:["operation-tb deployment-ing"]},[t("span",{class:["handle-tb",0===a.row.status?"unhandl":"",1===a.row.status?"handle-close":""],on:{click:function(){if(0===a.row.status)return!1;1===a.row.status?Object(n.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post(i.a.deployClose,{id:a.row.id});case 3:200===(s=t.sent).data.code?(e.$Message.success(e.$t("depTai.closeSuccess")),e.getDeployList()):e.$Message.error(s.data.message),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))():Object(n.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post(i.a.deployStart,{id:a.row.id});case 3:200===(s=t.sent).data.code?(e.$Message.info(e.$t("depTai.projectDeploying"),3),e.getDeployList()):e.$Message.error(s.data.message),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},1===a.row.status?e.$t("depTai.closeServe"):e.$t("depTai.enableServe")),t("span",{class:"details-tb",on:{click:function(){e.$store.commit("set_deploy_id",a.row.id),e.$store.commit("set_deploy_taskid",a.row.taskId),e.$parent.changeView("DeployDetail")}}},e.$t("depTai.projectDetail")),t("span",{class:"delete-tb",on:{click:function(){e.deleteTips=!0,e.deleteDeployId=a.row.id}}},e.$t("depTai.delServe"))])}}],modelColumns2:[{title:this.$t("depTai.versionName"),key:"ver-name",ellipsis:!0,render:function(e,t){return e("div",{class:"v-name-tb"},[e("span",{class:"v-name-text deploy-text-over",attrs:{title:t.row.name}},t.row.name||"-")])}},{title:this.$t("depTai.versionNumber"),key:"ver-number",tooltip:!0,render:function(e,t){return e("span",{class:"v-num-tb deploy-text-over",attrs:{title:t.row.version}},t.row.version)}},{title:this.$t("depTai.releaseTime"),key:"release-time",tooltip:!0,render:function(e,t){return e("span",{class:"release-time-tb deploy-text-over",attrs:{title:Object(s.l)("Y-M-D h:m",t.row.createTime)}},Object(s.l)("Y-M-D h:m",t.row.createTime))}},{title:this.$t("depTai.dource"),key:"dployment-source",width:100,tooltip:!0,render:function(t,a){return t("span",{class:"deploy-text-over"},0===a.row.source?"InFlex":e.$t("depTai.localUpload"))}},{title:this.$t("depTai.size"),key:"request-size",width:100,tooltip:!0,render:function(e,t){return e("span",{class:"deploy-text-over"},Object(s.p)(t.row.size))}},{title:this.$t("depTai.operation"),key:"operation",width:100,align:"center",tooltip:!0,render:function(t,a){return t("span",{class:"modal-operation deploy-text-over choice-btn",on:{click:function(){e.selectedModelName=a.row.name+" > "+a.row.version,e.$refs.modelName.style.color="#007aff";var t=event.target.parentNode.parentNode.parentNode.childNodes,s=document.querySelectorAll(".selected-td");e.modelId=a.row.id,e.dataHash=a.row.modelHash,s.forEach((function(e){e.classList.remove("selected-td")})),t.forEach((function(e){e.classList.add("selected-td")}))}}},e.$t("depTai.choice"))}}],tbData:[],tbData2:[]}},created:function(){this.tbLoading=!0,this.getDeployList(),this.getAllModelList(),this.createDeploy=this.$store.state.deployDetail.createDeploy},watch:{createDeploy:function(e){this.$store.commit("set_create_deploy",e)}},destroyed:function(){window.clearInterval(this.deployingTimer)},methods:{changePage:function(e){this.pageNum=e,this.tbLoading=!0,this.getDeployList()},getDeployList:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.findDeployList,{pageNum:this.pageNum,pageSize:this.pageSize});case 3:200===(t=e.sent).data.code?(t.data.payload.list.length>0?(this.tbData=t.data.payload.list,this.total=t.data.payload.total,this.deployingChecked()):(clearInterval(this.deployingTimer),this.tbData=[]),this.tbLoading=!1):this.$Message.error(t.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),deleteDeploy:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.deployRemove,{id:this.deleteDeployId});case 3:200===(t=e.sent).data.code?(this.$Message.success(this.$t("depTai.deleteSuccess")),this.getDeployList(),this.deleteTips=!1):this.$Message.error(t.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),getAllModelList:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.findAllDeployModel);case 3:200===(t=e.sent).data.code?t.data.payload.length>0&&(this.tbData2=t.data.payload):this.$Message.error(t.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),createDeployFn:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t="",this.dataChecked(this.spaceSplice(this.codeText))){e.next=5;break}return this.$Message.warning(this.$t("depTai.deployCodeUn")),e.abrupt("return");case 5:return e.next=7,this.$ipfs.add(d.a.Buffer.from(this.codeText));case 7:if(a=e.sent,t=a[0].hash,this.dataChecked(this.spaceSplice(this.name))&&this.dataChecked(this.spaceSplice(this.version))){e.next=12;break}return this.$Message.warning(this.$t("depTai.infoErrTips")),e.abrupt("return");case 12:if(this.dataChecked(this.modelId)){e.next=15;break}return this.$Message.warning(this.$t("depTai.modelUnChoice")),e.abrupt("return");case 15:return s={name:this.spaceSplice(this.name),version:this.spaceSplice(this.version),description:this.spaceSplice(this.description),modelId:this.modelId,dataHash:t},e.next=18,this.$axios.post(i.a.createDeploy,s);case 18:200===(n=e.sent).data.code?(this.createDeploy=!1,this.tbLoading=!0,this.getDeployList()):this.$Message.error(n.data.message),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0);case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),exampleDownload:function(){Object(s.i)(p.example1(),"example.py")},deployingChecked:function(){var e=this,t=!0,a=!1,s=void 0;try{for(var i,n=this.tbData[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){if(0===i.value.status)return window.clearInterval(this.deployingTimer),void(this.deployingTimer=setInterval((function(){e.getDeployList()}),2e3));window.clearInterval(this.deployingTimer)}}catch(e){a=!0,s=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}},dataChecked:function(e){return""!==e&&null!=e},spaceSplice:function(e){return e.replace(/\s+/g,"")}}},h=(a("1c0c"),a("971c"),Object(o.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-container"},[a("div",{staticClass:"head"},[a("div",{staticClass:"head-total",attrs:{cnrk:"我创建的"}},[e._v(e._s(e.$t("depTai.myDeploy"))),a("span",[e._v(e._s(e.total))])]),a("CoButton",{staticStyle:{padding:"0 15px"},attrs:{cnrk:"部署创建"},nativeOn:{click:function(t){e.confirmTips=!0}}},[e._v(e._s(e.$t("depTai.deployCreate")))])],1),a("Modal",{staticClass:"confirmTips",attrs:{title:e.$t("depTai.modalTipsTitle")},model:{value:e.confirmTips,callback:function(t){e.confirmTips=t},expression:"confirmTips"}},[a("p",[e._v(e._s(e.$t("depTai.modalTipsContent")))]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("CoButton",{staticStyle:{padding:"0 15px"},attrs:{cnrk:"确定"},nativeOn:{click:function(t){e.createDeploy=!0,e.confirmTips=!1}}},[e._v(e._s(e.$t("depTai.sure")))])],1)]),a("div",{staticClass:"model-list-main deploy-online"},[a("Table",{staticClass:"beautify-tb-no-data",class:{"g-loading":e.tbLoading},attrs:{columns:e.modelColumns,data:e.tbData}}),e.total>0?a("Page",{attrs:{total:e.total,"page-size":e.pageSize},on:{"on-change":e.changePage}}):e._e()],1),a("Modal",{staticClass:"create-model",style:{top:"20px"},attrs:{cnrk:"推理部署",title:e.$t("depTai.deployment"),width:"830"},model:{value:e.createDeploy,callback:function(t){e.createDeploy=t},expression:"createDeploy"}},[a("div",{staticClass:"create-main"},[a("div",{staticClass:"item"},[a("div",{staticClass:"small"},[a("label",{class:["item-title required min justify",e.isEn?"enmin":""],attrs:{cnrk:"版本名称"}},[e._v(e._s(e.$t("depTai.versionName")))]),a("i-input",{staticClass:"small-input",staticStyle:{width:"180px"},attrs:{type:"text",cnrk:"请输入版本名称",placeholder:e.$t("depTai.plsInputName")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"small"},[a("label",{class:["item-title required min justify",e.isEn?"enmin":""],attrs:{cnrk:"版本号"}},[e._v(e._s(e.$t("depTai.versionNumber")))]),a("i-input",{staticClass:"small-input",staticStyle:{width:"180px"},attrs:{type:"text",cnrk:"请输入版本号",placeholder:e.$t("depTai.plsInputVersion")},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)]),a("div",{staticClass:"item"},[a("div",{staticClass:"large"},[a("label",{class:["item-title min justify",e.isEn?"enmin":""],attrs:{cnrk:"描述"}},[e._v(e._s(e.$t("depTai.modelDescribe")))]),a("i-input",{staticClass:"describe",attrs:{type:"textarea",cnrk:"请输入项目描述",maxlength:250,placeholder:e.$t("depTai.plInputDescribe")},on:{input:function(t){e.descriptionLength=e.description.length}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),a("div",{staticClass:"description-length"},[e._v(e._s(e.descriptionLength)+" / 250")])],1)]),a("div",{staticClass:"item"},[a("div",{staticClass:"default"},[a("div",{staticClass:"item-title required"},[a("span",{attrs:{cnrk:"模型列表"}},[e._v(e._s(e.$t("depTai.modelList")))]),a("div",{staticClass:"selected-model"},[a("span",{attrs:{cnrk:"已选"}},[e._v(e._s(e.$t("depTai.choiced"))+":")]),a("span",{ref:"modelName",staticClass:"model-name"},[e._v(e._s(e.selectedModelName))])])]),a("div",{staticClass:"model-list"},[a("Table",{attrs:{columns:e.modelColumns2,data:e.tbData2,height:"240",width:"750"}})],1)])]),a("div",{staticClass:"item"},[a("div",{staticClass:"default"},[a("div",{staticClass:"item-title required"},[a("span",{attrs:{cnrk:"部署代码"}},[e._v(e._s(e.$t("depTai.deployCode")))]),a("div",{staticClass:"code-download",attrs:{cnrk:"实例代码下载"},on:{click:function(t){return e.exampleDownload()}}},[e._v(e._s(e.$t("depTai.codeDownload")))])]),a("div",{staticClass:"code-area"},[a("i-input",{staticClass:"code-input-area",attrs:{type:"textarea",placeholder:"### Enter your deoloyment code here ###"},model:{value:e.codeText,callback:function(t){e.codeText=t},expression:"codeText"}})],1)])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"creat-btns"},[a("CoButton",{attrs:{cnrk:"创建"},nativeOn:{click:function(t){return e.createDeployFn()}}},[e._v(e._s(e.$t("depTai.modelCreate")))]),a("CoButtonWhite",{attrs:{cnrk:"取消"},nativeOn:{click:function(t){e.createDeploy=!1}}},[e._v(e._s(e.$t("depTai.createCancel")))])],1)])]),a("Modal",{staticClass:"delete-model",attrs:{cnrk:"删除提示",title:e.$t("depTai.deleteTitle"),width:"468"},model:{value:e.deleteTips,callback:function(t){e.deleteTips=t},expression:"deleteTips"}},[a("p",{staticClass:"delete-tips-txt",attrs:{cnrk:"确认删除？删除后的服务将不会放入回收站！"}},[e._v(e._s(e.$t("depTai.deleteWarning")))]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"delete-btns"},[a("CoButton",{attrs:{cnrk:"确定"},nativeOn:{click:function(t){return e.deleteDeploy()}}},[e._v(e._s(e.$t("depTai.sure")))]),a("CoButtonWhite",{attrs:{cnrk:"取消"},nativeOn:{click:function(t){e.deleteTips=!1}}},[e._v(e._s(e.$t("depTai.createCancel")))])],1)])])],1)}),[],!1,null,"ddbce49a",null)).exports,m=a("cebc"),f=(a("6b54"),a("456d"),a("1487")),v=a.n(f),g=(a("2c43"),a("bc3a")),b=a.n(g),y=a("4328"),T=a.n(y),_=a("2f62"),k={name:"DeployDetail",data:function(){var e=this;return this.$createElement,{Api:i.a,curTabId:1,curReqStatTabId:1,gloading:!1,sampleCodeModal1:!1,sampleCode:!1,timer2:null,codeContent:"",canTimeOut:!0,version:{versionName:"",versionNum:"",describe:"",modelName:"",modelCreateTime:"",deployCreateTime:"",deployStatus:null},deploy:{hash:null},yuce:{imgList:[],tuiLiId:-1,yuceResultCode:""},apiReqStat:{reqTotal:0,reqSuccessNum:0,reqFaildNum:0,dateType:"DAY",chartDataY:[]},tbLoading:!1,yuceResLoading:!1,canYuCe:!1,pTotal:0,G2chart1:null,tbLogQuery:{pageSize:10,pageNum:1},columns1:[{title:this.$t("depTai.eventType"),key:"type",minWidth:200,tooltip:!0,render:function(t,a){return t("span",[e.$t("depTai.depSucc"),e.$t("depTai.tuiliSucc"),e.$t("depTai.reqErr")][a.row.type])}},{title:this.$t("depTai.info"),key:"info",minWidth:200,render:function(e,t){var a=t.row.info;return e("Poptip",{attrs:{trigger:"hover",width:"300","word-wrap":!0,content:a}},[e("textarea",{slot:"content",class:"log-list-tips-area"},[a]),e("span",{class:"log-list-tips"},[a])])}},{title:this.$t("depTai.time"),key:"createTime",width:150,tooltip:!0,render:function(e,t){var a=t.row.createTime;return e("span",Object(s.l)("Y-M-D h:m",a))}}],pList:[]}},filters:{filterFT:function(e){return Object(s.l)("Y-M-D h:m",e)},filterConvertToKW:function(e){return Object(s.g)(e)}},methods:{init:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showGloading(),this.ftCodeContent(),this.initTabsClass(),this.initSpanTitle(),this.reqDeployStatus(),e.next=7,this.reqDeployInfo();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),ftCodeContent:function(){document.querySelectorAll("pre code").forEach((function(e){v.a.highlightBlock(e)}))},showGloading:function(){this.gloading=!0},hideGloading:function(){this.gloading=!1},handleBack:function(){this.backTodeployList()},toggleServe:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.version.deployStatus){e.next=2;break}return e.abrupt("return");case 2:1===this.version.deployStatus?this.closeServe():this.enabelServe(),this.clearTimer2(),this.version.deployStatus=0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),enabelServe:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.deployStart,a={id:this.deployId},e.next=5,this.$axios.post(t,a);case 5:200===e.sent.data.code&&this.reqDeployStatus(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),closeServe:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.deployClose,a={id:this.deployId},e.next=5,this.$axios.post(t,a);case 5:200===e.sent.data.code&&this.reqDeployStatus(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),backTodeployList:function(){this.$parent.componentsName="DeployOnline"},delDeployH:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,confirm(this.$t("depTai.deleteWarning"))){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.$axios.post(i.a.deployRemove,{id:this.deployId});case 6:200===(t=e.sent).data.code?(this.$Message.success(this.$t("depTai.deleteSuccess")),Object(s.A)(800),this.backTodeployList()):this.$Message.error(t.data.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),initTabsClass:function(){var e=this;document.getElementById("tabsxyn").querySelectorAll(".vtab-btn").forEach((function(t){t.getAttribute("data-tab-id")==e.curTabId?t.classList.add("on"):t.classList.remove("on")}))},reqDeployStatus:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.deployDetail,a={id:this.deployId},e.next=5,this.$axios.post(t,a);case 5:if(200!==(s=e.sent).data.code){e.next=13;break}if(n=s.data.payload||[],Object.keys(n).length){e.next=10;break}return e.abrupt("return");case 10:this.version.deployStatus=n.status,this.clearTimer2(),this.timer2=setTimeout((function(){r.reqDeployStatus()}),2e3);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),reqDeployInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.deployDetail,a={id:this.deployId},e.next=5,this.$axios.post(t,a);case 5:if(200!==(s=e.sent).data.code){e.next=14;break}if(n=s.data.payload||[],Object.keys(n).length){e.next=10;break}return e.abrupt("return");case 10:this.version={versionName:n.name,versionNum:n.version,describe:n.description,modelName:n.modelName,modelCreateTime:n.modelCreateTime,deployCreateTime:n.createTime,deployStatus:n.status},this.deploy.hash=n.dataHash,this.hideGloading(),this.reqDeployCode(n.dataHash);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),updateDeployInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.deployUpdate,a={id:this.deployId,name:this.version.versionName,version:this.version.versionNum,description:this.version.describe},e.next=5,this.$axios.post(t,a);case 5:200===(s=e.sent).data.code?this.$Message.success(this.$t("depTai.saved")):this.$Message.error(s.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),reqDeployCode:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$ipfs.cat("/ipfs/"+t);case 3:a=e.sent,this.codeContent=a.toString("utf8"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),getDepStateObj:function(e){var t=[{text:this.$t("depTai.wait"),class:"y-wait"},{text:this.$t("depTai.success"),class:"y-success"},{text:this.$t("depTai.faild"),class:"y-faild"},{text:this.$t("depTai.colsed"),class:"y-faild"}];return Object(s.u)(e)?t[e]:{}},handleTabChange:function(){var e=event.target;if("vtab-btn"===e.className){var t=+e.getAttribute("data-tab-id");this.$refs.tab_ws.querySelectorAll(".vtab-btn").forEach((function(e){e.classList.remove("on")})),e.classList.add("on"),this.curTabId=t,4===t&&this.reqApiStatInfo(),this.sampleCode=2===t,5===t&&this.reqLogsList()}},handleDownloadSampleCode:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(s.i)(p.example1(),"example.py");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),showSampleCodeModal:function(){this.sampleCodeModal1=!0,document.getElementById("sample_mod").querySelector("#a_code").textContent=p.example1(),this.ftCodeContent()},updateDeployCodeToIpfs:function(){var e=this,t=this.codeContent;this.$ipfs.add(d.a.Buffer.from(t),(function(t,a){e.deploy.hash=a[0].hash,e.updateDeployCodeToServe()}))},updateDeployCodeToServe:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.a.updateDeloyCode,a={id:this.deployId,dataHash:this.deploy.hash},e.prev=2,e.next=5,this.$axios.post(t,a);case 5:if(200!==(s=e.sent).data.code){e.next=13;break}if(s.data.payload||[]){e.next=10;break}return e.abrupt("return");case 10:this.$Message.success(this.$t("depTai.saved")),e.next=14;break;case 13:this.$Message.error(s.data.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),initSpanTitle:function(){document.querySelectorAll(".ux7 li span").forEach((function(e){e.setAttribute("title",e.textContent)}))},upImgsC:function(){var e=Array.from(event.target.files);e?e.reduce((function(e,t){return e+t.size}),0)>200*Math.pow(1024,2)||(this.yuce.imgList=Array.from(e,(function(e){return e.url=URL.createObjectURL(e),e})),this.canYuCe=!0):this.canYuCe=!1},handleYuCe:function(){this.canYuCe&&(this.canYuCe=!1,this.yuceResLoading=!0,this.reqUploadYuCeImgs())},reqUploadYuCeImgs:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.a.upImgsGetDeployId,(a=new FormData).append("deployTaskId",this.deployTaskId),this.yuce.imgList.forEach((function(e){a.append("files",e)})),e.prev=4,e.next=7,b.a.post(t,a);case 7:if(200!==(s=e.sent).data.code){e.next=16;break}if(s.data.payload||[]){e.next=12;break}return e.abrupt("return");case 12:this.yuce.tuiLiId=s.data.payload,this.reqYuCe(),e.next=17;break;case 16:this.$Message.error(s.data.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4);case 22:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),destoryTimer1:function(){this.canTimeOut=!1},clearTimer2:function(){clearTimeout(this.timer2)},reqYuCe:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.a.getTestResult,a={reasoningTaskId:this.yuce.tuiLiId},e.next=5,b.a.post(t,T.a.stringify(a));case 5:if(200!==(n=e.sent).data.code){e.next=18;break}if(r=n.data.payload||[],Object.keys(r).length){e.next=10;break}return e.abrupt("return");case 10:if(0!=r.status||!this.canTimeOut){e.next=14;break}return e.next=13,Object(s.A)(1e3);case 13:return e.abrupt("return",this.reqYuCe());case 14:this.$refs.code03.textContent=r.result,this.yuce.yuceResultCode=r.result,this.ftCodeContent(),this.yuceResLoading=!1;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),handleDownloadYuceResultCode:function(){var e=this.$refs.code03.textContent;e&&Object(s.i)(e,"result.py")},initReqCharts:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("chart_continer").innerHTML="",e.next=3,Object(s.A)(50);case 3:t=this.$t("depTai.success"),a=this.$t("depTai.faild"),i=this.apiReqStat.chartDataY.map((function(e){return e[t]=e.successNumber,e[a]=e.failNumber,e.date=Object(s.l)("Y-M-D",e.createTime),e})),(n=(new DataSet.View).source(i)).transform({type:"fold",fields:[t,a],key:"type",value:"value"}),this.G2chart1=new G2.Chart({container:"chart_continer",padding:[30,50,80,70],height:400,forceFit:!0,animate:!0}),this.G2chart1.source(n,{date:{range:[0,1]}}),this.G2chart1.tooltip({crosshairs:{type:"line"}}),this.G2chart1.area().position("date*value").color("type"),this.G2chart1.line().position("date*value").color("type").size(2),this.G2chart1.render();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reqApiStatInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,a=i.a.apiReqStat,s={deployId:this.deployId},1==t?(s.beforeCode="DAY",s.beforeNum=7):2==t?(s.beforeCode="MONTH",s.beforeNum=1):3==t?(s.beforeCode="MONTH",s.beforeNum=6):4==t&&(s.beforeCode="YEAR",s.beforeNum=1),e.prev=4,e.next=7,this.$axios.post(a,s);case 7:if(200!==(n=e.sent).data.code){e.next=19;break}if(r=n.data.payload||[],Object.keys(r).length){e.next=12;break}return e.abrupt("return");case 12:this.apiReqStat.chartDataY=r.list,this.apiReqStat.reqTotal=r.reqTotal,this.apiReqStat.reqSuccessNum=r.successCount,this.apiReqStat.reqFaildNum=r.failCount,this.initReqCharts(),e.next=20;break;case 19:this.$Message.error(n.data.message);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4);case 25:case"end":return e.stop()}}),e,this,[[4,22]])})));return function(){return e.apply(this,arguments)}}(),changeDateType:function(e){this.$refs.cht_w.querySelectorAll("button").forEach((function(e){e.classList.remove("on")})),event.target.classList.add("on"),this.reqApiStatInfo(e)},reqLogsList:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.tbLoading=!0,t=i.a.deployLogs,a={deployId:this.deployId},a=Object.assign(this.tbLogQuery,a),e.next=7,this.$axios.post(t,a);case 7:if(200!==(s=e.sent).data.code){e.next=17;break}if(n=s.data.payload||[],Object.keys(n).length){e.next=12;break}return e.abrupt("return");case 12:this.pList=n.list,this.tbLogQuery.pTotal=n.total,this.tbLogQuery.pageNum=n.pageNum,this.tbLogQuery.pageSize=n.pageSize,this.tbLoading=!1;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.tbLogQuery.pageNum=e,this.reqLogsList()}},computed:Object(m.a)({},Object(_.c)({deployId:function(e){return e.deployDetail.deployId},deployTaskId:function(e){return e.deployDetail.deployTaskId}}),{curInpDescInfo:function(){return"".concat(this.version.describe.length," / 250")},yuceImgNames:function(){var e=this.yuce.imgList.length,t=this.yuce.imgList.reduce((function(e,t){return e+t.name+", "}),"");if(e>0)return this.$t("depTai.total")+e+" "+t},getReqSuccessRate:function(){var e=100*Object(s.x)(this.apiReqStat.reqSuccessNum/this.apiReqStat.reqTotal);return e?e+"%":"0%"},showApiTab:function(){return 1===this.version.deployStatus},showUploadYuCeImgBtn:function(){return 1===this.version.deployStatus},handleTgServe:function(){return[this.$t("depTai.wait"),this.$t("depTai.closeServe"),this.$t("depTai.enableServe"),this.$t("depTai.enableServe")][this.version.deployStatus]||"-"},showDownloadYuCeBtn:function(){return!!this.yuce.yuceResultCode}}),watch:{showApiTab:function(e){this.curTabId=1,this.initTabsClass()}},mounted:function(){this.init()},created:function(){(!Object(s.u)(this.deployId)||this.deployId<0)&&this.backTodeployList()},beforeDestroy:function(){this.destoryTimer1(),this.clearTimer2()}},C={name:"Deployment",components:{ModelMng:c,DeployOnline:h,DeployDetail:(a("3fcd"),a("c665"),Object(o.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compontent-wp"},[a("div",{staticClass:"dep-wps",class:{"g-loading":e.gloading}},[a("ul",{staticClass:"top-cbar"},[a("li",{staticClass:"la li-a1"},[a("span",{staticClass:"sy opx r_ico",attrs:{cnrk:"部署列表"}},[e._v(e._s(e.$t("depTai.depList")))]),a("span",{staticClass:"sy bbf"},[e._v(e._s(e.version.versionName))])]),a("li",{staticClass:"la li-a2"},[a("span",{staticClass:"s-zt",attrs:{cnrk:"部署状态"}},[e._v(e._s(e.$t("depTai.depStatus")))]),a("span",{staticClass:"sp-state",class:e.getDepStateObj(e.version.deployStatus).class},[e._v(e._s(e.getDepStateObj(e.version.deployStatus).text))])]),a("li",{staticClass:"la li-a3"},[a("a",{staticClass:"y-btn y-close-btn",attrs:{href:"javascript:;",cnrk:"切换启用关闭服务"},on:{click:function(t){return e.toggleServe()}}},[e._v(e._s(e.handleTgServe))]),a("a",{staticClass:"y-btn y-del-btn",attrs:{href:"javascript:;",cnrk:"删除服务"},on:{click:function(t){return e.delDeployH()}}},[e._v(e._s(e.$t("depTai.delServe")))])]),a("li",{staticClass:"la li-a4"},[a("a",{staticClass:"y-btn y-close-btn",attrs:{href:"javascript:;",cnrk:"返回"},on:{click:function(t){return e.handleBack()}}},[e._v(e._s(e.$t("depTai.back")))])])]),a("section",{staticClass:"option-w"},[a("div",{staticClass:"d-ms"},[a("span",{staticClass:"s_u",attrs:{cnrk:"版本名称"}},[e._v(e._s(e.$t("depTai.verName")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.version.versionName,expression:"version.versionName"}],staticClass:"inp-q",attrs:{type:"text",maxlength:"20"},domProps:{value:e.version.versionName},on:{change:function(t){return e.updateDeployInfo()},input:function(t){t.target.composing||e.$set(e.version,"versionName",t.target.value)}}}),a("span",{staticClass:"s_u",attrs:{cnrk:"版本号"}},[e._v(e._s(e.$t("depTai.verNumn")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.version.versionNum,expression:"version.versionNum"}],staticClass:"inp-q",attrs:{type:"text",maxlength:"15"},domProps:{value:e.version.versionNum},on:{change:function(t){return e.updateDeployInfo()},input:function(t){t.target.composing||e.$set(e.version,"versionNum",t.target.value)}}})]),a("div",{staticClass:"d-ms"},[a("span",{staticClass:"s_u",attrs:{cnrk:"描述"}},[e._v(e._s(e.$t("depTai.desc")))]),a("p",{staticClass:"tx-w",attrs:{"data-inp":e.curInpDescInfo}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.version.describe,expression:"version.describe"}],staticClass:"tx_z",attrs:{maxlength:"250"},domProps:{value:e.version.describe},on:{change:function(t){return e.updateDeployInfo()},input:function(t){t.target.composing||e.$set(e.version,"describe",t.target.value)}}})])]),a("div",{staticClass:"d-ms"},[a("span",{staticClass:"s_u",attrs:{crnk:"已选模型"}},[e._v(e._s(e.$t("depTai.sltModel")))]),a("span",{staticClass:"s_2c s_2s"},[e._v("\n          "+e._s(e.version.modelName)+"  >  "+e._s(e.version.versionNum)+" "+e._s(e._f("filterFT")(e.version.modelCreateTime))+"\n        ")]),a("span",{staticClass:"s_u",attrs:{cnrk:"部署时间"}},[e._v(e._s(e.$t("depTai.depTime")))]),a("span",{staticClass:"s_2c"},[e._v(e._s(e._f("filterFT")(e.version.deployCreateTime)))]),a("span",{staticClass:"s_u",attrs:{cnrk:"请求成功/失败"}},[e._v(e._s(e.$t("depTai.reqSorF")))]),a("span",{staticClass:"s_2c"},[e._v("\n          "+e._s(e._f("filterConvertToKW")(e.apiReqStat.reqSuccessNum))+" / "+e._s(e._f("filterConvertToKW")(e.apiReqStat.reqFaildNum))+"\n        ")])])]),a("section",{ref:"tab_ws",staticClass:"tab-w",attrs:{id:"tabsxyn"},on:{click:function(t){return e.handleTabChange()}}},[a("button",{staticClass:"vtab-btn",attrs:{"data-tab-id":"1",cnrk:"部署代码"}},[e._v(e._s(e.$t("depTai.deployCode")))]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.showApiTab,expression:"showApiTab"}],staticClass:"vtab-btn",attrs:{"data-tab-id":"2"}},[e._v("API")]),a("button",{staticClass:"vtab-btn",attrs:{"data-tab-id":"3",cnrk:"预测"}},[e._v(e._s(e.$t("depTai.yuce")))]),a("button",{staticClass:"vtab-btn",attrs:{"data-tab-id":"4",cnrk:"请求"}},[e._v(e._s(e.$t("depTai.req")))]),a("button",{staticClass:"vtab-btn",attrs:{"data-tab-id":"5",cnrk:"日志"}},[e._v(e._s(e.$t("depTai.log")))])]),a("div",{staticClass:"tab-content-w"},[a("section",{directives:[{name:"show",rawName:"v-show",value:1===e.curTabId,expression:"curTabId === 1"}],staticClass:"stn ycode-w"},[a("p",{staticClass:"tpc"},[a("span",{staticClass:"pbtn s_ty",attrs:{cnrk:"示例代码"},on:{click:function(t){return e.showSampleCodeModal()}}},[e._v(e._s(e.$t("depTai.exampleCode")))]),a("span",{staticClass:"pbtn d-btn",attrs:{cnrk:"下载"},on:{click:function(t){return e.handleDownloadSampleCode()}}},[e._v(e._s(e.$t("depTai.download")))])]),a("div",{staticClass:"code-box"},[a("p",{staticClass:"py1",attrs:{cnrk:"你的代码"}},[e._v(e._s(e.$t("depTai.yourCode")))]),a("div",{staticClass:"code-area-w"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.codeContent,expression:"codeContent"}],staticClass:"code-area",domProps:{value:e.codeContent},on:{change:function(t){return e.updateDeployCodeToIpfs()},input:function(t){t.target.composing||(e.codeContent=t.target.value)}}})])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:2===e.curTabId,expression:"curTabId === 2"}],staticClass:"stn y-api-w"},[a("div",{staticClass:"api-sk f_req f_r1"},[a("p",{attrs:{cnrk:"第一步: 获取任务id地址:"}},[e._v(e._s(e.$t("depTai.getTaskUrl")))]),a("p",{staticClass:"grs"},[e._v(e._s(e.Api.yuceApi)+"/deployReasoning/createApiReasoning/"+e._s(e.deployTaskId))]),a("p",{attrs:{cnrk:"请求参数"}},[e._v(e._s(e.$t("depTai.reqParams")))]),a("ul",{staticClass:"ux7"},[a("li",{staticClass:"l_gray"},[a("span",{attrs:{cnrk:"名称"}},[e._v(e._s(e.$t("depTai.name")))]),a("span",{attrs:{cnrk:"必填"}},[e._v(e._s(e.$t("depTai.must")))]),a("span",{attrs:{cnrk:"类型"}},[e._v(e._s(e.$t("depTai.type")))]),a("span",{attrs:{cnrk:"说明"}},[e._v(e._s(e.$t("depTai.explain")))])]),a("li",[a("span",[e._v("files")]),a("span",{attrs:{cnrk:"是"}},[e._v(e._s(e.$t("depTai.ok")))]),a("span",[e._v("String")]),a("span",{attrs:{cnrk:"需要推理的图片"}},[e._v(e._s(e.$t("depTai.soxa")))])])])]),a("div",{staticClass:"api-sk f_res f_r2"},[a("ul",{staticClass:"u4r"},[a("li",[a("p",{attrs:{cnrk:"请求方式"}},[e._v(e._s(e.$t("depTai.reqType")))]),a("p",{staticClass:"grs"},[e._v("POST")])]),a("li",[a("p",{attrs:{cnrk:"返回格式"}},[e._v(e._s(e.$t("depTai.backFormart")))]),a("p",{staticClass:"grs"},[e._v("JSON")])])]),a("p",{attrs:{cnrk:"返回参数"}},[e._v(e._s(e.$t("depTai.backParams")))]),a("ul",{staticClass:"ux7"},[a("li",{staticClass:"l_gray"},[a("span",{attrs:{cnrk:"名称"}},[e._v(e._s(e.$t("depTai.name")))]),a("span",{attrs:{cnrk:"类型"}},[e._v(e._s(e.$t("depTai.type")))]),a("span",{attrs:{cnrk:"说明"}},[e._v(e._s(e.$t("depTai.explain")))])]),a("li",[a("span",[e._v("taskId")]),a("span",[e._v("String")]),a("span",{attrs:{cnrk:"该次推理的任务id,通过该id去获取推理结果"}},[e._v(e._s(e.$t("depTai.gaiciId")))])])]),a("p",{attrs:{cnrk:"JSON返回示例"}},[e._v(e._s(e.$t("depTai.jsonExam")))]),a("pre",{staticClass:"pre1"},[e._v("            "),a("code",[e._v('\n  {\n    "code": 200,\n    "taskId": "35ec6576341b459581044efb9f9b6a0a" // '+e._s(e.$t("depTai.gaiciId"))+"\n  }\n            ")]),e._v("\n          ")])]),a("div",{staticClass:"api-sk f_req"},[a("p",{attrs:{cnrk:"第二步: 获取推理结果接口地址："}},[e._v(e._s(e.$t("depTai.getResultUrl")))]),a("p",{staticClass:"grs"},[e._v(e._s(e.Api.yuceApi)+"/deployReasoning/getResult")]),a("p",{attrs:{cnrk:"请求参数"}},[e._v(e._s(e.$t("depTai.reqParams")))]),a("ul",{staticClass:"ux7"},[a("li",{staticClass:"l_gray"},[a("span",{attrs:{cnrk:"名称"}},[e._v(e._s(e.$t("depTai.name")))]),a("span",{attrs:{cnrk:"必填"}},[e._v(e._s(e.$t("depTai.must")))]),a("span",{attrs:{cnrk:"类型"}},[e._v(e._s(e.$t("depTai.type")))]),a("span",{attrs:{cnrk:"说明"}},[e._v(e._s(e.$t("depTai.explain")))])]),a("li",[a("span",[e._v("reasoningTaskId")]),a("span",{attrs:{cnrk:"是"}},[e._v(e._s(e.$t("depTai.ok")))]),a("span",[e._v("String")]),a("span",{attrs:{cnrk:"推理任务id"}},[e._v(e._s(e.$t("depTai.tuiliId")))])])])]),a("div",{staticClass:"api-sk f_res"},[a("ul",{staticClass:"u4r"},[a("li",[a("p",[e._v(e._s(e.$t("depTai.reqType")))]),a("p",{staticClass:"grs"},[e._v("POST")])]),a("li",[a("p",[e._v(e._s(e.$t("depTai.backFormart")))]),a("p",{staticClass:"grs"},[e._v("JSON")])])]),a("p",[e._v(e._s(e.$t("depTai.backParams")))]),a("ul",{staticClass:"ux7"},[a("li",{staticClass:"l_gray"},[a("span",[e._v(e._s(e.$t("depTai.name")))]),a("span",[e._v(e._s(e.$t("depTai.type")))]),a("span",[e._v(e._s(e.$t("depTai.explain")))])]),a("li",[a("span",[e._v("reasoningTaskId")]),a("span",[e._v("String")]),a("span",[e._v(e._s(e.$t("depTai.gaiciId")))])])]),a("p",{attrs:{cnrk:"JSON返回示例"}},[e._v(e._s(e.$t("depTai.jsonExam")))]),a("pre",{staticClass:"pre1"},[e._v("            "),a("code",[e._v('\n  {\n    "code": 200,\n    "status": 0, //'+e._s(e.$t("depTai.tuiliSuo1"))+'\n    "result": "结果" //'+e._s(e.$t("depTai.tuiliSuo2"))+"\n  }\n            ")]),e._v("\n          ")])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:e.sampleCode,expression:"sampleCode"}],staticClass:"sample-code"},[a("div",{staticClass:"stn y-api-w last-code-block"},[a("p",{attrs:{cnrk:"参考示例"}},[e._v(e._s(e.$t("depTai.sampleCode")))]),a("pre",{staticClass:"pre1"},[e._v("            "),a("code",[e._v('\n# -*- coding: utf-8 -*-\nimport requests\nimport json\nimport time\n\nurl_1 = "http://47.75.161.139/deployReasoning/createApiReasoning/XXX"  # '+e._s(e.$t("depTai.uploadDataUrl"))+"\nurl_2 = 'http://47.75.161.139/deployReasoning/getResult'  # "+e._s(e.$t("depTai.resultUrl"))+"\nf = open('sign_0.jpg', 'rb')  # "+e._s(e.$t("depTai.DataBeUploaded"))+'\nfiles = {\'files\': (\'sign_0.jpg\', f, \'image/png\', {})}\nres1 = json.loads(requests.post(url_1, files = files).text)\n\nif res1["code"] == 200:\n    task_id = taskId\n    data = {"reasoningTaskId": task_id}\n    while True:\n        res2 = json.loads(requests.post(url_2, json=data, headers={"Content-Type": "application/json"}).text)\n        if res2["code"] == 200:\n            if res2["status"] == 0:  # '+e._s(e.$t("depTai.deploying2"))+'\n                time.sleep(2)\n            elif res2["status"] == 1:  # '+e._s(e.$t("depTai.tuiliSucc"))+'\n                print("Reasoning success,the results is: {}".format(res2["result"]))\n                break\n            elif res2["status"] == 2:  # '+e._s(e.$t("depTai.tuilishibai"))+'\n                print("Reasoning failure,the reason of failure is: {}".format(res2["result"]))\n                break\n        else:\n            print("Reasoning failure,the reason of failure is: {}".format(res2["reason"]))\n            break\nelse:\n    print("Reasoning failure,the reason of failure is: {}".format(res1["reason"]))\n            ')]),e._v("\n          ")])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:3===e.curTabId,expression:"curTabId === 3"}],staticClass:"stn y-yuce-w"},[a("div",{staticClass:"ycs yc_l"},[a("p",{staticClass:"p2",attrs:{cnrk:"预测数据"}},[e._v(" "+e._s(e.$t("depTai.yuceData"))+" "),a("span",{staticStyle:{color:"#d6d6d6"}},[e._v(e._s(e.$t("depTai.jinZhic")))])]),a("div",{staticClass:"select-data"},[a("Input",{staticClass:"inp-qb",attrs:{type:"text",readonly:"",placeholder:e.$t("depTai.cloiceDir"),value:e.yuceImgNames,cnrk:"请选择目录(仅支持图片上传)"}}),a("input",{ref:"inpov",staticClass:"inpfm",attrs:{type:"file",accept:"image/*",multiple:"",id:"inpfm",hidden:""},on:{change:function(t){return e.upImgsC()}}}),a("label",{staticClass:"base-btn2 bg-blue chx-btn",class:{dis:!e.showUploadYuCeImgBtn},attrs:{for:"inpfm",cnrk:"选择"}},[e._v(e._s(e.$t("depTai.cloice")))])],1),a("ul",{staticClass:"show-img-area"},e._l(e.yuce.imgList,(function(e,t){return a("li",{key:t},[a("img",{attrs:{src:e.url,title:e.name}})])})),0),a("div",{staticClass:"btn-w"},[a("button",{staticClass:"bg-linear yc-btn",attrs:{disabled:!e.canYuCe,cnrk:"上传并预测"},on:{click:function(t){return e.handleYuCe()}}},[e._v(e._s(e.$t("depTai.upAndYuce")))])])]),a("div",{staticClass:"ycs yc_r",class:{"g-loading2":e.yuceResLoading},attrs:{"load-tip":e.$t("depTai.yuceing")}},[a("p",{staticClass:"po2"},[a("span",{attrs:{cnrk:"输出结果"}},[e._v(e._s(e.$t("depTai.output")))]),a("a",{directives:[{name:"show",rawName:"v-show",value:e.showDownloadYuCeBtn,expression:"showDownloadYuCeBtn"}],staticClass:"down-btn",attrs:{href:"javascript:;",cnrk:"下载"},on:{click:function(t){return e.handleDownloadYuceResultCode()}}},[e._v(e._s(e.$t("depTai.download")))])]),a("pre",{staticClass:"pre1"},[e._v("            "),a("code",{ref:"code03"}),e._v("\n          ")])])]),a("section",{directives:[{name:"show",rawName:"v-show",value:4===e.curTabId,expression:"curTabId === 4"}],staticClass:"stn y-req-w"},[a("ul",{staticClass:"req-info"},[a("li",[a("p",{staticClass:"pr1",attrs:{cnrk:"请求总次数"}},[e._v(e._s(e.$t("depTai.reqTotal")))]),a("p",{staticClass:"pr2"},[e._v(e._s(e.apiReqStat.reqTotal))])]),a("li",[a("p",{staticClass:"pr1",attrs:{cnrk:"成功请求总次数"}},[e._v(e._s(e.$t("depTai.reqSucTotal")))]),a("p",{staticClass:"pr2"},[e._v(e._s(e.apiReqStat.reqSuccessNum))])]),a("li",[a("p",{staticClass:"pr1"},[e._v(e._s(e.$t("depTai.reqFaildTotal")))]),a("p",{staticClass:"pr2"},[e._v(e._s(e.apiReqStat.reqFaildNum))])]),a("li",[a("p",{staticClass:"pr1",attrs:{cnrk:"成功率"}},[e._v(e._s(e.$t("depTai.successRate")))]),a("p",{staticClass:"pr2"},[e._v(e._s(e.getReqSuccessRate))])])]),a("div",{staticClass:"chart-w"},[a("div",{ref:"cht_w",staticClass:"chart-tabs-w"},[a("span",{staticClass:"pct",attrs:{cnrk:"请求次数统计图"}},[e._v(e._s(e.$t("depTai.reqNumStat")))]),a("button",{staticClass:"t-btn on",attrs:{cnrk:"近七日"},on:{click:function(t){return e.changeDateType(1)}}},[e._v(e._s(e.$t("depTai.jqiri")))]),a("button",{staticClass:"t-btn",on:{click:function(t){return e.changeDateType(2)}}},[e._v(e._s(e.$t("depTai.jyiyue")))]),a("button",{staticClass:"t-btn",on:{click:function(t){return e.changeDateType(3)}}},[e._v(e._s(e.$t("depTai.jliuyue")))]),a("button",{staticClass:"t-btn",on:{click:function(t){return e.changeDateType(4)}}},[e._v(e._s(e.$t("depTai.aYear")))])]),a("div",{attrs:{id:"chart_continer"}})])]),a("section",{directives:[{name:"show",rawName:"v-show",value:5===e.curTabId,expression:"curTabId === 5"}],staticClass:"stn y-log-w",class:{"g-loading":e.tbLoading}},[a("Table",{staticClass:"table-m1 beautify-tb-no-data",attrs:{columns:e.columns1,data:e.pList}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pList.length,expression:"pList.length"}],staticClass:"page-w"},[a("Page",{attrs:{total:e.tbLogQuery.pTotal,"page-size":e.tbLogQuery.pageSize,current:e.tbLogQuery.pageNum},on:{"on-change":e.changePage}})],1)],1)]),a("Modal",{staticClass:"sample-code-modal",attrs:{id:"sample_mod",width:"700",draggable:"",cnrk:"示例代码",title:e.$t("depTai.exampleCode"),closable:!0,"footer-hide":""},model:{value:e.sampleCodeModal1,callback:function(t){e.sampleCodeModal1=t},expression:"sampleCodeModal1"}},[a("div",{staticClass:"show-code-w_p7xv"},[a("pre",[e._v("          "),a("code",{attrs:{id:"a_code"}}),e._v("\n        ")])])])],1)])}),[],!1,null,"4f88c567",null)).exports},data:function(){return{componentsName:"ModelMng",isEn:Object(s.r)(),navList:[{name:this.$t("depTai.modelMng"),lnk:"ModelMng"},{name:this.$t("depTai.deployOnline"),lnk:"DeployOnline"}]}},computed:{isEng:function(){return Object(s.r)()}},created:function(){var e=this.$route.params.showDeployDetail;this.componentsName=e?"DeployDetail":this.$store.state.deploy_child_component||"ModelMng"},methods:{changeView:function(e){this.componentsName=e,this.$store.commit("set_deploy_child_component",e)}}},w=(a("fdc2"),Object(o.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deployment view-zps"},[a("div",{staticClass:"nav"},[a("div",{class:["nav-title",e.isEn?"en-title":""],attrs:{cnrk:"推理部署"}},[e._v(e._s(e.$t("depTai.deployment")))]),a("ul",{staticClass:"nav-list"},e._l(e.navList,(function(t,s){return a("li",{key:s,class:t.lnk===e.componentsName?"routerCheck":"",attrs:{title:t.name},on:{click:function(a){return e.changeView(t.lnk)}}},[e._v(e._s(t.name))])})),0)]),a("div",{staticClass:"container-wrapper"},[a(e.componentsName,{tag:"component",staticClass:"container-view"})],1)])}),[],!1,null,"11eaaf3e",null));t.default=w.exports},fdc2:function(e,t,a){"use strict";var s=a("a3d6");a.n(s).a}}]);