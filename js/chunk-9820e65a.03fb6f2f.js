(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9820e65a"],{"547d":function(t,e,s){},9195:function(t,e,s){t.exports=s.p+"img/login-img.8bd4dafd.png"},a55b:function(t,e,s){"use strict";s.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left",attrs:{oncontextmenu:"javascript:return false;"}},[e("img",{staticClass:"imxys",attrs:{ondragstart:"javascript:return false;",src:s("9195")}})])}],r=(s("ac6a"),s("456d"),s("4917"),s("96cf"),s("3b8d")),a=s("b893"),i=s("4ec3"),o=s("a78e"),c=s.n(o),u={name:"Login",inject:["reload"],components:{Header:s("0418").a},data:function(){return{title:"login",account:"",password:"",loginLoading:!1,loginFail:!1,pwdMsg:this.$t("Login.loginPassword"),showWxQrCode:!1,timer1s:null,navlist:[{name:this.$t("Footer.help"),url:"/help"},{name:this.$t("Footer.updateLog"),url:"/uplog"},{name:this.$t("Footer.xieyi"),url:"/protocol"},{name:this.$t("Footer.advice"),url:"/feedback"}]}},computed:{verify_account:function(){return Object(a.v)(this.account)||Object(a.q)(this.account)},verify_password:function(){return this.password.trim()},canLogin:function(){return this.verify_account&&this.verify_password},rapTxt:function(){return this.showWxQrCode?this.$t("Login.passwordLogin"):this.$t("Login.rapLogin")}},methods:{goPath:function(t){this.$router.push({name:t})},lnkPage:function(t,e){this.$router.push(t)},login:Object(a.h)(Object(r.a)(regeneratorRuntime.mark((function t(){var e,s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loginLoading=!0,t.prev=1,e=i.a.userLogin,s={username:this.account,password:this.password},t.next=6,this.$axios.post(e,s);case 6:(n=t.sent).data.success?this.loginSuccessCtr(n.data.data):(this.pwdMsg=n.data.msg,this.loginFail=!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1);case 13:this.loginLoading=!1;case 14:case"end":return t.stop()}}),t,this,[[1,10]])}))),350),loginSuccessCtr:function(t){c.a.set("token",JSON.stringify(t)),c.a.set("lgtp",Object(a.v)(this.account)?"phone":"email"),Object(a.y)("isLogin",!0,1920),this.$store.commit("set_console_child_component","Console"),this.$store.commit("SET_LOGIN_TYPE",Object(a.v)(this.account)?"phone":"email"),this.$store.commit("set_header_show",!0),this.$store.commit("set_user_login",!0),this.$store.dispatch("getUserInfo"),this.$store.dispatch("getUserInfo2"),this.$router.push({name:"Console"})},setKeyboardShortcut:function(){var t=this,e="";document.onkeydown=function(s){if(s.ctrlKey&&s.altKey&&s.key.match(/\d/)){if(t.isRapid())return;e+=s.key}"1238"==e&&Object(a.y)("login.rapidLogin","1")}},enterPwd:function(){this.loginFail=!1},rapidLogin:function(){var t=this;document.querySelector(".view-body").onkeydown=function(e){var s=[{user:"we10086110@qq.com",pwd:"qwe123"},{user:"13883241934",pwd:"qwe123"}];e&&"Enter"===e.key&&t.canLogin&&!t.showWxQrCode&&t.login(),t.isRapid()&&e.altKey&&/\d/.test(e.key)&&e.key<=s.length&&(e.preventDefault(),t.account=s[e.key-1].user||"",t.password=s[e.key-1].pwd||"")}},isRapid:function(){return"1"===Object(a.o)("login.rapidLogin")},clearTimer1s:function(){clearTimeout(this.timer1s)},reqWxVstate:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var e,s,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.clearTimer1s(),t.next=4,this.$axios.post(i.a.getLoginStatusYx);case 4:if(200!==(e=t.sent).data.code){t.next=10;break}if(s=e.data.payload||[],Object.keys(s).length){t.next=9;break}return t.abrupt("return");case 9:0===s.status?this.timer1s=setTimeout((function(){n.reqWxVstate()}),1e3):1===s.status?this.loginSuccessCtr():(alert(s.errorInfo),this.handleRapidLogin());case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),refreshWxCode:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reqWxAppid();case 2:this.createWxLoginQrCode(),this.reqWxVstate();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),reqWxAppid:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var e,s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=i.a.getWxInfo,t.next=4,this.$axios.post(e);case 4:if(200!==(s=t.sent).data.code){t.next=11;break}if(n=s.data.payload||[],Object.keys(n).length){t.next=9;break}return t.abrupt("return");case 9:this.wx_appid=n.appid,this.wx_appState=n.state;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),createWxLoginQrCode:function(){new WxLogin({self_redirect:!0,id:"wx_login_box",appid:this.wx_appid,scope:"snsapi_login",redirect_uri:encodeURIComponent("https://www.tesra.cloud/api/wxUser/loginCallback"),state:this.wx_appState,href:"https://tsimg.top/css/wx_qrcode.css"})},handleRapidLogin:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.showWxQrCode){t.next=5;break}return t.next=3,this.refreshWxCode();case 3:t.next=6;break;case 5:this.clearTimer1s();case 6:this.showWxQrCode=!this.showWxQrCode;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.rapidLogin(),this.setKeyboardShortcut()},created:function(){Object(a.s)()&&(c.a.remove("token"),c.a.remove("lgtp"),Object(a.y)("isLogin",!1),this.reload())},beforeDestroy:function(){this.clearTimer1s()}},p=(s("fd4b"),s("2877")),l=Object(p.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-zps login-page"},[s("Header",{staticClass:"login-header"}),s("div",{staticClass:"content view-body",attrs:{tabindex:"1"}},[t._m(0),s("div",{staticClass:"right"},[s("div",{staticClass:"loginArea"},[s("div",{staticClass:"loginTitle",attrs:{cnrk:"密码登录"}},[t._v(t._s(t.$t("Login.loginPassword")))]),s("div",{staticClass:"fg-tpk",class:{on:t.showWxQrCode}},[s("a",{staticClass:"refresh-btn-4s",attrs:{href:"javascript:;",cnrk:"刷新"},on:{click:function(e){return t.refreshWxCode()}}},[t._v("↻ "+t._s(t.$t("Login.refresh")))]),s("div",{staticClass:"wx-login-box",attrs:{id:"wx_login_box"}}),s("div",{staticClass:"inputItem"},[s("div",{staticClass:"inputItem-title",attrs:{cnrk:"登录账号"}},[t._v(t._s(t.$t("Login.account")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",placeholder:t.$t("Login.accountPla"),cnrk:"p:中国大陆手机号/邮箱"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.verify_account&&""!==t.account,expression:"!verify_account && account !== '' "}],attrs:{cnrk:"账号的格式不正确"}},[t._v(t._s(t.$t("Login.accountError")))])]),s("div",{staticClass:"inputItem"},[s("div",{staticClass:"inputItem-title",attrs:{cnrk:"登录密码"}},[t._v(t._s(t.$t("Login.password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"inp-mms",attrs:{type:"password",placeholder:t.$t("Login.passwordPla"),cnrk:"p:请输入您的登录密码"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.enterPwd]}}),s("p",{directives:[{name:"show",rawName:"v-show",value:t.loginFail&&""!==t.password,expression:"loginFail && password !== '' "}]},[t._v(t._s(t.pwdMsg))])]),s("Button",{staticClass:"base-btn1 bg-blue login-btn",attrs:{type:"primary",loading:t.loginLoading,disabled:!t.canLogin},on:{click:t.login}},[t._v(t._s(t.$t("Login.login")))])],1),s("div",{staticClass:"opnsw"},[s("span",{attrs:{cnrk:"忘记密码"},on:{click:function(e){return t.$router.push("/reset-pwd")}}},[t._v(t._s(t.$t("Login.forgetPassword")))]),s("span",{attrs:{cnrk:"免费注册"},on:{click:function(e){return t.$router.push("/register")}}},[t._v(t._s(t.$t("Login.registerFree")))])])])])]),s("div",{staticClass:"login-footer"},[s("div",{staticClass:"nav-wrap"},t._l(t.navlist,(function(e,n){return s("a",{key:n,staticClass:"a-lnk",attrs:{href:e.url},on:{click:function(s){return t.lnkPage(e.url,e.component)}}},[t._v(t._s(e.name))])})),0),s("p",{staticClass:"copyright"},[t._v(t._s(t.$t("Footer.copyright"))+" 渝ICP备"),s("a",{staticClass:"copy-link",attrs:{href:"http://www.beian.miit.gov.cn/",target:"_blank"}},[t._v("19013136号-1")])])])],1)}),n,!1,null,"26b99163",null);e.default=l.exports},fd4b:function(t,e,s){"use strict";var n=s("547d");s.n(n).a}}]);