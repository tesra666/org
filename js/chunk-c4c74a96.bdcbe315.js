(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c4c74a96"],{"0e53":function(e,t,s){},"0e70":function(e,t,s){"use strict";var r=s("b80c"),i=s.n(r);t.default=i.a},"390f":function(e,t,s){"use strict";(function(e){s("c5f6"),s("28a5"),s("7f7f"),s("96cf");var r=s("3b8d"),i=s("4ec3"),a=s("b893");t.a={data:function(){return{nameVerify:{show:!1,text:""},birthdayVerify:{show:!1,text:""},addVerify:{show:!1,text:""},majorVerify:{show:!1,text:""},introductionVerify:{show:!1,text:""},addressVerify:{show:!1,text:""},schoolVerify:{show:!1,text:""},occupationVerify:{show:!1,text:""},user:{birthdayError:!1,nameError:!1,name:null,birthday:null,sex:null,add:"http://",major:null,introduction:"",address:null,school:null,occupation:null,image:null},verify:{text:function(e){return!/^[\u4e00-\u9fa5|a-zA-Z|0-9]+$/.test(e)},birthday:function(e){return!/\d{4}\-\d{1,2}\-\d{1,2}/.test(e)},url:function(e){return!/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/.test(e)}},isChange:null,url:i.a.ipfsUrl,isEn:Object(a.r)(),changeNumber:0}},created:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.UserMeans);case 3:200===(t=e.sent).data.code?null!==(s=t.data.payload||{})&&(this.user.name=null===s.name||void 0===s.name?"":s.name,this.user.birthday=Object(a.l)("Y-M-D",s.birthday),this.user.sex=void 0===s.sex?"":s.sex,this.user.add=void 0===s.addPage?"":s.addPage,this.user.major=void 0===s.major?"":s.major,this.user.introduction=void 0===s.introduction?"":s.introduction,this.isChange=null!==s.introduction&&void 0!==s.introduction?s.introduction.length:0,this.user.address=void 0===s.address?"":s.address,this.user.school=void 0===s.school?"":s.school,this.user.occupation=void 0===s.occupation?"":s.occupation,this.user.image=void 0===s.image?"":s.image):100===t.data.code&&this.$Message.error(t.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),methods:{fnUpload:function(t){var s=this,r="image/jpeg"===t.type||"image/png"===t.type,i=t.size/1024/1024<2;if(!r)return this.$Message.error(this.$t("Personal.imageSizeTips")),!1;if(!i)return this.$Message.error(this.$t("Personal.imageSizeTips")),!1;var a=new FileReader;return a.readAsArrayBuffer(t),a.onloadend=function(t){s.$ipfs.add(e.from(a.result)).then((function(e){s.user.image=e[0].hash,s.fnSetUser({image:e[0].hash})}))},!1},fnOccupationVerify:function(){return""===this.user.occupation?(this.occupationVerify.show=!0,this.occupationVerify.text=this.$t("Personal.noEmptyOccupation"),!1):this.verify.text(this.user.occupation)?(this.occupationVerify.show=!0,this.occupationVerify.text=this.$t("Personal.errorOccupation"),!1):(this.occupationVerify.show=!1,void this.fnSetUser({occupation:this.user.occupation}))},fnSchoolVerify:function(){return""===this.user.school?(this.schoolVerify.show=!0,this.schoolVerify.text=this.$t("Personal.noEmptySchool"),!1):this.verify.text(this.user.school)?(this.schoolVerify.show=!0,this.schoolVerify.text=this.$t("Personal.errorSchool"),!1):(this.schoolVerify.show=!1,void this.fnSetUser({school:this.user.school}))},fnAddressVerify:function(){return""===this.user.address?(this.addressVerify.show=!0,this.addressVerify.text=this.$t("Personal.noEmptyAddress"),!1):this.verify.text(this.user.address)?(this.addressVerify.show=!0,this.addressVerify.text=this.$t("Personal.errorAddress"),!1):(this.addressVerify.show=!1,void this.fnSetUser({address:this.user.address}))},fnMajorVerify:function(){return""===this.user.major?(this.majorVerify.show=!0,this.majorVerify.text=this.$t("Personal.noEmptyMajor"),!1):this.verify.text(this.user.major)?(this.majorVerify.show=!0,this.majorVerify.text=this.$t("Personal.errorMajor"),!1):(this.majorVerify.show=!1,void this.fnSetUser({major:this.user.major}))},fnIntroductionVerify:function(){return""===this.user.introduction?(this.introductionVerify.show=!0,this.introductionVerify.text=this.$t("Personal.noEmptyBiography"),!1):this.user.introduction.length>500?(this.introductionVerify.show=!0,this.introductionVerify.text=this.$t("Personal.toLongBiography"),!1):(this.introductionVerify.show=!1,void(this.isChange===this.user.introduction.length&&0===this.changeNumber||(this.changeNumber=0,this.fnSetUser({introduction:this.user.introduction}))))},fnAddVerify:function(){return""===this.user.add?(this.addVerify.show=!0,this.addVerify.text=this.$t("Personal.noEmptyHomepage"),!1):this.verify.url(this.user.add)?(this.addVerify.show=!0,this.addVerify.text=this.$t("Personal.errorHomepage"),!1):(this.addVerify.show=!1,void this.fnSetUser({addPage:this.user.add}))},fnSex:function(e){this.fnSetUser({sex:this.user.sex})},fnBirthdayVerify:function(){if(""===this.user.birthday)return this.birthdayVerify.show=!0,this.birthdayVerify.text=this.$t("Personal.noEmptyBirthdays"),!1;if(this.verify.birthday(this.user.birthday))return this.birthdayVerify.show=!0,this.birthdayVerify.text=this.$t("Personal.errorBirthdaysExpect"),!1;var e=this.user.birthday.split("-"),t=new Date;return Number(e[0])>t.getFullYear()?(this.birthdayVerify.show=!0,this.birthdayVerify.text=this.$t("Personal.theBirthdaysMaximum")+t.getFullYear(),!1):Number(e[0])<1900||Number(e[1]>12)||Number(e[2]>31)||0===Number(e[1])||0===Number(e[2])?(this.birthdayVerify.show=!0,this.birthdayVerify.text=this.$t("Personal.errorBirthdays"),!1):(this.birthdayVerify.show=!1,void this.fnSetUser({birthday:Number(new Date(this.user.birthday))}))},fnNameVerify:function(){return""===this.user.name?(this.nameVerify.show=!0,this.nameVerify.text=this.$t("Personal.noEmptyNickname"),!1):this.verify.text(this.user.name)?(this.nameVerify.show=!0,this.nameVerify.text=this.$t("Personal.errorNickname"),!1):(this.nameVerify.show=!1,void this.fnSetUser({name:this.user.name}))},fnSetUser:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post(i.a.updateUser,{newUser:JSON.stringify(t)});case 3:200===(s=e.sent).data.code?(this.$store.dispatch("getUserInfo2"),this.$Message.success(this.$t("Personal.setSuccessfully"))):100===s.data.code&&this.$Message.error(s.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},watch:{"user.introduction":function(){this.changeNumber=++this.changeNumber}}}}).call(this,s("1c35").Buffer)},6695:function(e,t,s){"use strict";var r=s("0e53");s.n(r).a},"90ab":function(e,t,s){"use strict";s.r(t);var r=s("390f").a,i=(s("6695"),s("0e70")),a=s("2877");var n=Object(a.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.$style.warp},[s("div",{class:e.$style.sidebar},[s("Upload",{attrs:{"before-upload":e.fnUpload,action:"//jsonplaceholder.typicode.com/posts/"}},[s("div",{class:e.$style["user-head-box"]},[""!==e.user.image&&null!==e.user.image?s("img",{class:e.$style["user-head"],attrs:{src:e.url+e.user.image,alt:""}}):e._e(),s("div",{class:e.$style["user-head-hint"]},[e._v("\n          "+e._s(e.isEn?"Edit":"点击更换")+"\n        ")])])]),s("div",{class:e.$style["user-info"]},[s("div",{class:e.$style["input-group"]},[s("span",{attrs:{cnrk:"昵称"}},[e._v(e._s(e.$t("Personal.nickname")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",cnrk:"p:请输入昵称",placeholder:e.$t("Personal.enterNickname"),maxlength:"12"},domProps:{value:e.user.name},on:{change:e.fnNameVerify,input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.nameVerify.show,expression:"nameVerify.show"}]},[e._v(e._s(e.nameVerify.text))])])],1),s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"生日"}},[e._v(e._s(e.$t("Personal.birthday")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.birthday,expression:"user.birthday"}],attrs:{type:"text",cnrk:"p:请输入生日",placeholder:e.$t("Personal.enterBirthday"),maxlength:"12"},domProps:{value:e.user.birthday},on:{change:e.fnBirthdayVerify,input:function(t){t.target.composing||e.$set(e.user,"birthday",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.birthdayVerify.show,expression:"birthdayVerify.show"}]},[e._v(e._s(e.birthdayVerify.text))])])],1),s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"性别"}},[e._v(e._s(e.$t("Personal.sex")))]),s("RadioGroup",{staticClass:"input-group-radio",on:{"on-change":e.fnSex},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[s("Radio",{attrs:{label:1,cnrk:"男"}},[e._v(e._s(e.$t("Personal.man")))]),s("Radio",{attrs:{label:2,cnrk:"女"}},[e._v(e._s(e.$t("Personal.woman")))]),s("Radio",{attrs:{label:3,cnrk:"猜"}},[e._v(e._s(e.$t("Personal.guess")))])],1)],1),s("router-link",{class:[e.$style["user-btn"],"bg-linear"],attrs:{tag:"span",to:{name:"Setting"},cnrk:"账户管理"}},[e._v(e._s(e.$t("Personal.accountManagement")))])],1)],1),s("div",{class:e.$style.content},[s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"小传"}},[e._v(e._s(e.$t("Personal.briefBiography")))]),s("Input",{staticClass:"input-group-textarea",attrs:{type:"textarea",maxlength:500,cnrk:"p:请输入小传",placeholder:e.$t("Personal.enterBriefBiography"),autosize:{minRows:6,maxRows:6}},on:{"on-focus":function(t){e.isChange=e.user.introduction.length},"on-blur":e.fnIntroductionVerify},model:{value:e.user.introduction,callback:function(t){e.$set(e.user,"introduction",t)},expression:"user.introduction"}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.introductionVerify.show,expression:"introductionVerify.show"}]},[e._v(e._s(e.introductionVerify.text))])])],1),s("div",{class:e.$style["input-group-wrap"]},[s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"社交主页"}},[e._v(e._s(e.$t("Personal.personalHomepage")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.add,expression:"user.add"}],attrs:{type:"text",cnrk:"p:请输入社交主页",placeholder:e.$t("Personal.enterPersonalHomepageUrl"),maxlength:"30"},domProps:{value:e.user.add},on:{change:e.fnAddVerify,input:function(t){t.target.composing||e.$set(e.user,"add",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.addVerify.show,expression:"addVerify.show"}]},[e._v(e._s(e.addVerify.text))])])],1),s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"专业"}},[e._v(e._s(e.$t("Personal.major")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.major,expression:"user.major"}],attrs:{type:"text",cnrk:"p:请输入专业",placeholder:e.$t("Personal.enterMajor"),maxlength:"12"},domProps:{value:e.user.major},on:{change:e.fnMajorVerify,input:function(t){t.target.composing||e.$set(e.user,"major",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.majorVerify.show,expression:"majorVerify.show"}]},[e._v(e._s(e.majorVerify.text))])])],1),s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"地区"}},[e._v(e._s(e.$t("Personal.region")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.address,expression:"user.address"}],attrs:{type:"text",cnrk:"p:请输入地区",placeholder:e.$t("Personal.enterRegion"),maxlength:"12"},domProps:{value:e.user.address},on:{change:e.fnAddressVerify,input:function(t){t.target.composing||e.$set(e.user,"address",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.addressVerify.show,expression:"addressVerify.show"}]},[e._v(e._s(e.addressVerify.text))])])],1)]),s("div",{class:e.$style["input-group-wrap"],staticStyle:{"justify-content":"flex-start","margin-top":"0px"}},[s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"学校"}},[e._v(e._s(e.$t("Personal.school")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.school,expression:"user.school"}],attrs:{type:"text",cnrk:"p:请输入学校",placeholder:e.$t("Personal.enterSchool"),maxlength:"12"},domProps:{value:e.user.school},on:{change:e.fnSchoolVerify,input:function(t){t.target.composing||e.$set(e.user,"school",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.schoolVerify.show,expression:"schoolVerify.show"}]},[e._v(e._s(e.schoolVerify.text))])])],1),s("div",{class:[e.$style["input-group"],e.$style["input-group-gap"]]},[s("span",{attrs:{cnrk:"职业"}},[e._v(e._s(e.$t("Personal.occupation")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.occupation,expression:"user.occupation"}],attrs:{type:"text",cnrk:"p:请输入职业",placeholder:e.$t("Personal.enterOccupation"),maxlength:"12"},domProps:{value:e.user.occupation},on:{change:e.fnOccupationVerify,input:function(t){t.target.composing||e.$set(e.user,"occupation",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.occupationVerify.show,expression:"occupationVerify.show"}]},[e._v(e._s(e.occupationVerify.text))])])],1)])])])}),[],!1,(function(e){this.$style=i.default.locals||i.default}),null,null);t.default=n.exports},b80c:function(e,t,s){e.exports={texto:"Personal_texto_1wrU5",warp:"Personal_warp_sHPZH",sidebar:"Personal_sidebar_3Hfmu",content:"Personal_content_BDWU3","user-head-box":"Personal_user-head-box_25KQN","input-group-wrap":"Personal_input-group-wrap_2wVyc","input-group":"Personal_input-group_2AJFP","user-head-hint":"Personal_user-head-hint_LsRMx","user-info":"Personal_user-info_30TdJ","input-group-gap":"Personal_input-group-gap_18coj","user-btn":"Personal_user-btn_1GBEv"}}}]);