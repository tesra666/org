(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edba38d8"],{"121f":function(t,e,n){"use strict";var a=n("724c"),i=n.n(a);i.a},"3fbe":function(t,e,n){"use strict";var a=n("4537"),i=n.n(a);i.a},4537:function(t,e,n){},"724c":function(t,e,n){},e58a:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.$route.fullpath,staticClass:"uplog-container"},[t.spinShow?n("Spin",{attrs:{size:"large"}}):t._e(),n("div",{staticClass:"catalogue"},t._l(t.catalogueData.list,function(e,a){return n("ul",{key:a,class:t.titleShow[a]?"act-name":void 0,attrs:{index:a},on:{click:function(e){return t.showTitle(a)}}},[n("li",{staticClass:"item-title",attrs:{title:e.name}},[n("Icon",{attrs:{type:"md-arrow-dropdown"}}),t._v(t._s(e.name))],1),t._l(e.list,function(a,i){return n("li",{key:i,staticClass:"item-content",attrs:{title:a.name,documentId:a.id},on:{click:function(n){return n.stopPropagation(),t.setDocumentId(e,a)}}},[n("router-link",{attrs:{to:"/uplog-detail/"+a.id}},[t._v(t._s(a.name))])],1)})],2)}),0),n("div",{staticClass:"main"},[t.spinShow2?n("Spin",{attrs:{size:"large"}}):t._e(),n("div",{staticClass:"text-content"},[n("button",{staticClass:"enshrine-btn",class:t.enshrineData.isEnshrined?"enshrined":void 0,on:{click:function(e){return t.enshrineTxt()}}},[t._v(t._s(t.enshrineData.isEnshrined?t.$t("Console.activityCollected"):t.$t("Console.activityCollect")))]),n("article",{staticClass:"context",domProps:{innerHTML:t._s(t.compiledMarkdown)}})]),n("div",{staticClass:"schedule"},[n("Anchor",{attrs:{"show-ink":"",container:".text-content"}},t._l(t.anchorList,function(t,e){return n("AnchorLink",{key:e,attrs:{href:t.href,title:t.name}})}),1)],1)],1)],1)},i=[],s=(n("7f7f"),n("96cf"),n("3b8d")),r=(n("ac6a"),n("a481"),n("0e54")),o=n.n(r),c=n("1487"),u=n.n(c),h=(n("2c43"),n("bc3a"),n("4ec3")),d=n("fa7d"),l={name:"uplog-detail",data:function(){return{spinShow:!0,spinShow2:!1,catalogueData:"",anchorList:[],titleShow:[],enshrineData:{isEnshrined:!1,txt:d["a"].isEn()?"Collect":"收藏",documentId:""},markedTxt:""}},computed:{compiledMarkdown:function(){var t=/[i][d][=]['][a][h][r][N][a][N][']/gi;return this.markedTxt?(this.markedTxt.replace(t,'id="title"'),o()(this.markedTxt,{sanitize:!0})):""}},watch:{compiledMarkdown:function(t){var e=this;""!==t&&setTimeout(function(){var t=[],n=document.querySelectorAll(".context h3");n.forEach(function(e,n){e.setAttribute("id","title"+n);var a={href:"#title"+n,name:e.textContent};t.push(a)}),e.anchorList=t,e.spinShow2=!1},500)},"$store.state.curLang":function(t){this.$router.push("/uplog")}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post(h["a"].getDocumentById,{id:this.$route.params.id});case 2:return e=t.sent,200===e.data.code?this.requestDoc(e.data.payload.content):this.$Message.error(e.data.message),this.enshrineData.documentId=this.$route.params.id,t.next=7,this.$axios.post(h["a"].updataLogDocuments);case 7:n=t.sent,200===n.data.code&&(n.data.payload.list.length>0?this.catalogueData=n.data.payload:this.$Message.error(n.data.message));case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){this.setTitle()},beforeRouteLeave:function(t,e,n){this.$store.commit("setBreadArr",[]),n()},methods:{showTitle:function(t){this.$set(this.titleShow,t,!this.titleShow[t])},setDocumentId:function(t,e){this.enshrineData.documentId=e.id,this.isEnshrine(),this.requestDoc(e.content),this.spinShow2=!0},setBreadArr:function(t,e){var n=this.$store.state.breadArr;n.splice(1,2,{name:t.name,path:"/uplog-detail/"+t.list[0].id},{name:e.name,path:"/uplog-detail/"+e.id}),this.$store.commit("setBreadArr",n)},enshrineTxt:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(d["a"].isLogin()){t.next=3;break}return this.$Message.warning("未登录"),t.abrupt("return",!1);case 3:if(this.enshrineData.isEnshrined){t.next=10;break}return t.next=6,this.$axios.post(h["a"].documentEnshrine,{documentId:this.enshrineData.documentId,type:-1});case 6:e=t.sent,200===e.data.code||100===e.data.code?(this.enshrineData.isEnshrined=!0,this.enshrineData.txt=d["a"].isEn()?"Collected":"已收藏"):this.$Message.error(e.data.message),t.next=14;break;case 10:return t.next=12,this.$axios.post(h["a"].documentCancelEnshrine,{documentId:this.enshrineData.documentId,type:-1});case 12:n=t.sent,200===n.data.code?(this.enshrineData.isEnshrined=!1,this.enshrineData.txt=d["a"].isEn()?"Collect":"收藏"):this.$Message.error(n.data.message);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),requestDoc:function(t){var e=new o.a.Renderer;e.heading=function(t,e){return"<h3 id='ahr"+parseInt(t)+"'>"+t+"</h3>"},o.a.setOptions({renderer:e,highlight:function(t){return u.a.highlightAuto(t).value},pedantic:!1,gfm:!0,tables:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1}),this.markedTxt=t},isEnshrine:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(d["a"].isLogin()){t.next=3;break}return this.spinShow=!1,t.abrupt("return",!1);case 3:return t.next=5,this.$axios.post(h["a"].documentEnshrineChecked,{documentId:this.enshrineData.documentId,url:location.pathname,title:document.querySelectorAll(".item-content .router-link-active")[0].textContent,type:-1});case 5:e=t.sent,200===e.data.code?(this.enshrineData.isEnshrined=e.data.payload,this.enshrineData.txt=e.data.payload?d["a"].isEn()?"Collected":"已收藏":d["a"].isEn()?"Collect":"收藏",this.spinShow=!1):this.$Message.error(e.data.message);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setTitle:function(){var t=this;setTimeout(function(){var e=document.querySelectorAll(".catalogue .item-content"),n="";if(e.forEach(function(e){e.getAttribute("documentid")===t.$route.params.id&&(n=e)}),n&&n.children.length>0){n.parentElement.classList.add("act-name");var a=parseInt(n.parentElement.getAttribute("index"));t.showTitle(a),t.isEnshrine()}else t.setTitle();t.spinShow=!1},500)}}},m=l,p=(n("3fbe"),n("121f"),n("2877")),f=Object(p["a"])(m,a,i,!1,null,"d8008984",null);e["default"]=f.exports}}]);